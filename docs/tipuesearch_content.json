{"pages":[{"url":"https://brillliantz.github.io/MySite/thoughts/ListOfMotivationalThings.html","text":"Alibaba Group The Journey to IPO - 阿里巴巴IPO全程回顾 介绍 这是一个记录了阿里巴巴集团上市过程的 视频 ，时长10min，类似一个小纪录片。 无法访问YouTube可以看 这个连接 感受 我试着从这个这个\"IPO前夜\"的时间往回看阿里巴巴的15年，或者从视频结尾股价从\\ \\(68一路飚上\\\\) 99的时候回看整个IPO过程，激动人心。 这让我想到之前看过的一个自我激励的方式：当面临自律困难、选择困难时，闭上眼睛假象自己已经成功（广义的）的情景，回想当下的这个时间，你对做过的那些决定、选择过的那些坚持是否会后悔？ 摘录一些视频中的句子 We are not a China company. We are a company that happens in China. We don't come here to raise money. We come here to find partners. Amazing Cars By Tesla 特斯拉电动车 对特斯拉的印象完全来自于无意识输入。 Musk超牛逼 Musk又要造车子了，他还要造火箭 Musk快破产了 我哥在西海岸工作，他说硅谷清一色的特斯拉 今天再次无意间看到Musk的毕业演讲，于是终于主动打开Tesla官网一探究竟。WOW！解放注意力的自动驾驶系统，半小时充满电池的 超级充电站 ，更好的安全性（如车头空间的缓冲），还有能让geek们高潮的 搭载\"生物武器\"防御模式 的空气净化系统…… 顺手又搜到了最新的Model 3发布会，看到了Tesla天才的战略： Telsa 采用了三部曲的计划（Elon自己在发布会使用 trilogy 这个词，虽然实际上是发布了四部车）： Roadster：小产量高价格。属于是试验性质的产品，主要是用来证明Tesla有能力来出产快而牛逼的电动汽车。Roadster在加州还能偶尔看到几辆，在世界上其他地方几乎没有。整车是基于莲花的底盘，车内空间非常小。在北美的售价是 10w usd+，算非常昂贵的车。 Model S：中等产量中等价格的Sedan（4门5座轿车）。这车对于咱们国人还算比较熟知的。加速快，巡航范围也在400+公里。在2013年获得了极高的用户满意度反馈，也因此，Tesla在那段时间内公司股价屡创新高。 Model X：中等产量中等价格的SUV车型。和Model S的战略地位差不多，速度依然很快。最大的特别是硕大的鸥翼门（telsa官方称其为falcon door，如果直译应该叫隼门。烦。。）下面有图。 最后就是今天要发布的 Tesla 3：属于大产量而平价的车型。也是Telsa开始要转入大型量产的开始。 ​ 作者：覃超链接：https://www.zhihu.com/question/37959016/answer/93386136来源：知乎著作权归作者所有，转载请联系作者获得授权。 老妈吐槽我实习还八字没一撇的时候，看起了几十万的车子。而我不认为这是在满足我潜在的 消费欲望 ，而是在 体会格局 ：这么fancy的\"大号电动玩具\"、Tesla的雄心壮志，相比于各种主要时为了刺激多巴胺而设计的电子游戏、眼前的繁重的课业，可以算作是 更高的格局 。 从火箭上天到殖民火星，尽管这些事情可能永远都不会和我发生联系，但只是知道我和这些东西同处于一个世界，就足以激励我不满足于眼前的小格局。 if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) { var align = \"center\", indent = \"0em\", linebreak = \"false\"; if (false) { align = (screen.width < 768) ? \"left\" : align; indent = (screen.width < 768) ? \"0em\" : indent; linebreak = (screen.width < 768) ? 'true' : linebreak; } var mathjaxscript = document.createElement('script'); var location_protocol = (false) ? 'https' : document.location.protocol; if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:'; mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#'; mathjaxscript.type = 'text/javascript'; mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; mathjaxscript[(window.opera ? \"innerHTML\" : \"text\")] = \"MathJax.Hub.Config({\" + \" config: ['MMLorHTML.js'],\" + \" TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },\" + \" jax: ['input/TeX','input/MathML','output/HTML-CSS'],\" + \" extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js'],\" + \" displayAlign: '\"+ align +\"',\" + \" displayIndent: '\"+ indent +\"',\" + \" showMathMenu: true,\" + \" messageStyle: 'normal',\" + \" tex2jax: { \" + \" inlineMath: [ ['\\\\\\\\(','\\\\\\\\)'] ], \" + \" displayMath: [ ['$$','$$'] ],\" + \" processEscapes: true,\" + \" preview: 'TeX',\" + \" }, \" + \" 'HTML-CSS': { \" + \" styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} },\" + \" linebreaks: { automatic: \"+ linebreak +\", width: '90% container' },\" + \" }, \" + \"}); \" + \"if ('default' !== 'default') {\" + \"MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {\" + \"var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;\" + \"VARIANT['normal'].fonts.unshift('MathJax_default');\" + \"VARIANT['bold'].fonts.unshift('MathJax_default-bold');\" + \"VARIANT['italic'].fonts.unshift('MathJax_default-italic');\" + \"VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');\" + \"});\" + \"MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {\" + \"var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;\" + \"VARIANT['normal'].fonts.unshift('MathJax_default');\" + \"VARIANT['bold'].fonts.unshift('MathJax_default-bold');\" + \"VARIANT['italic'].fonts.unshift('MathJax_default-italic');\" + \"VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');\" + \"});\" + \"}\"; (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript); }","tags":"thoughts","title":"为什么要好好工作 -- List"},{"url":"https://brillliantz.github.io/MySite/test/test.html","text":"this new post hello, WOrld! let's rock: $$ \\frac{\\sum_1&#94;{+inf} n+1}{x&#94;{2t+1}} $$ if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) { var align = \"center\", indent = \"0em\", linebreak = \"false\"; if (false) { align = (screen.width < 768) ? \"left\" : align; indent = (screen.width < 768) ? \"0em\" : indent; linebreak = (screen.width < 768) ? 'true' : linebreak; } var mathjaxscript = document.createElement('script'); var location_protocol = (false) ? 'https' : document.location.protocol; if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:'; mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#'; mathjaxscript.type = 'text/javascript'; mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; mathjaxscript[(window.opera ? \"innerHTML\" : \"text\")] = \"MathJax.Hub.Config({\" + \" config: ['MMLorHTML.js'],\" + \" TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },\" + \" jax: ['input/TeX','input/MathML','output/HTML-CSS'],\" + \" extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js'],\" + \" displayAlign: '\"+ align +\"',\" + \" displayIndent: '\"+ indent +\"',\" + \" showMathMenu: true,\" + \" messageStyle: 'normal',\" + \" tex2jax: { \" + \" inlineMath: [ ['\\\\\\\\(','\\\\\\\\)'] ], \" + \" displayMath: [ ['$$','$$'] ],\" + \" processEscapes: true,\" + \" preview: 'TeX',\" + \" }, \" + \" 'HTML-CSS': { \" + \" styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} },\" + \" linebreaks: { automatic: \"+ linebreak +\", width: '90% container' },\" + \" }, \" + \"}); \" + \"if ('default' !== 'default') {\" + \"MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {\" + \"var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;\" + \"VARIANT['normal'].fonts.unshift('MathJax_default');\" + \"VARIANT['bold'].fonts.unshift('MathJax_default-bold');\" + \"VARIANT['italic'].fonts.unshift('MathJax_default-italic');\" + \"VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');\" + \"});\" + \"MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {\" + \"var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;\" + \"VARIANT['normal'].fonts.unshift('MathJax_default');\" + \"VARIANT['bold'].fonts.unshift('MathJax_default-bold');\" + \"VARIANT['italic'].fonts.unshift('MathJax_default-italic');\" + \"VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');\" + \"});\" + \"}\"; (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript); }","tags":"TEST","title":"Feature tests"},{"url":"https://brillliantz.github.io/MySite/quant/price_indicator.html","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI colors. */ .ansibold { font-weight: bold; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; border-left-width: 1px; padding-left: 5px; background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%); } div.cell.jupyter-soft-selected { border-left-color: #90CAF9; border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected { border-color: #ababab; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%); } @media print { div.cell.selected { border-color: transparent; } } div.cell.selected.jupyter-soft-selected { border-left-width: 0; padding-left: 6px; background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%); } .edit_mode div.cell.selected { border-color: #66BB6A; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%); } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } @-moz-document url-prefix() { div.inner_cell { overflow-x: hidden; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ padding: 0.4em; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */ /* .CodeMirror-lines */ padding: 0; border: 0; border-radius: 0; } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html td, .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } .highlight .hll { background-color: #ffffcc } .highlight { background: #f8f8f8; } .highlight .c { color: #408080; font-style: italic } /* Comment */ .highlight .err { border: 1px solid #FF0000 } /* Error */ .highlight .k { color: #008000; font-weight: bold } /* Keyword */ .highlight .o { color: #666666 } /* Operator */ .highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight .gd { color: #A00000 } /* Generic.Deleted */ .highlight .ge { font-style: italic } /* Generic.Emph */ .highlight .gr { color: #FF0000 } /* Generic.Error */ .highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight .gi { color: #00A000 } /* Generic.Inserted */ .highlight .go { color: #888888 } /* Generic.Output */ .highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight .gs { font-weight: bold } /* Generic.Strong */ .highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight .gt { color: #0044DD } /* Generic.Traceback */ .highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight .kp { color: #008000 } /* Keyword.Pseudo */ .highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight .kt { color: #B00040 } /* Keyword.Type */ .highlight .m { color: #666666 } /* Literal.Number */ .highlight .s { color: #BA2121 } /* Literal.String */ .highlight .na { color: #7D9029 } /* Name.Attribute */ .highlight .nb { color: #008000 } /* Name.Builtin */ .highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight .no { color: #880000 } /* Name.Constant */ .highlight .nd { color: #AA22FF } /* Name.Decorator */ .highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight .nf { color: #0000FF } /* Name.Function */ .highlight .nl { color: #A0A000 } /* Name.Label */ .highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight .nv { color: #19177C } /* Name.Variable */ .highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight .w { color: #bbbbbb } /* Text.Whitespace */ .highlight .mb { color: #666666 } /* Literal.Number.Bin */ .highlight .mf { color: #666666 } /* Literal.Number.Float */ .highlight .mh { color: #666666 } /* Literal.Number.Hex */ .highlight .mi { color: #666666 } /* Literal.Number.Integer */ .highlight .mo { color: #666666 } /* Literal.Number.Oct */ .highlight .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight .sc { color: #BA2121 } /* Literal.String.Char */ .highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight .sx { color: #008000 } /* Literal.String.Other */ .highlight .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight .ss { color: #19177C } /* Literal.String.Symbol */ .highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight .vc { color: #19177C } /* Name.Variable.Class */ .highlight .vg { color: #19177C } /* Name.Variable.Global */ .highlight .vi { color: #19177C } /* Name.Variable.Instance */ .highlight .il { color: #666666 } /* Literal.Number.Integer.Long */ /* Temporary definitions which will become obsolete with Notebook release 5.0 */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-bold { font-weight: bold; } In [1]: import numpy as np import pandas as pd import seaborn as sns import matplotlib.pyplot as plt # import matplotlib.finance as mf from matplotlib.widgets import MultiCursor import statsmodels.tsa.stattools as stt # import scipy.signal as sgn import statsmodels.api as sm # from statsmodels.sandbox.regression.predstd import wls_prediction_std # from matplotlib.mlab import PCA In [2]: % matplotlib inline In [3]: # Style. 1 sns . set_context ( 'paper' ) sns . set_style ( \"darkgrid\" ) In [4]: # Style. 2 sns . set_context ( 'paper' ) sns . set_style ( \"dark\" , rc = { 'axes.facecolor' : 'black' , 'grid.color' : 'red' , 'grid.linestyle' : '--' , 'figure.facecolor' : 'grey' }) In [5]: hft = pd . read_hdf ( '/home/bingnan/HFT_SR_RM_MA_TA.hdf' ) /usr/lib/python2.7/dist-packages/tables/leaf.py:392: PerformanceWarning: The Leaf ``/HFT/block0_values`` is exceeding the maximum recommended rowsize (104857600 bytes); be ready to see PyTables asking for *lots* of memory and possibly slow I/O. You may want to reduce the rowsize by trimming the value of dimensions that are orthogonal (and preferably close) to the *main* dimension of this leave. Alternatively, in case you have specified a very small/large chunksize, you may want to increase/decrease it. PerformanceWarning) In [6]: ta = hft . minor_xs ( 'TA0001' ) . copy () In [7]: #------------------------------------------------ '''Some time length''' night_len = int ( 4 * 3600 * 2.5 ) mor_len = int ( 4 * 3600 * 2.25 ) aftn_len = int ( 4 * 3600 * 1.5 ) day_len = night_len + mor_len + aftn_len + 4 In [26]: ta . ix [:, [ 'bidPrc_0' , 'bidPrc_1' , 'bidPrc_2' , 'askPrc_3' , 'bidPrc_4' , 'askPrc_1' , 'askPrc_2' , 'askPrc_3' , 'askPrc_4' ]] . any ( axis = 0 ) == 0 Out[26]: bidPrc_0 False bidPrc_1 False bidPrc_2 False askPrc_3 False bidPrc_4 False askPrc_1 False askPrc_2 False askPrc_3 False askPrc_4 False dtype: bool In [8]: #----------------------------------------------- '''add columns''' def AddCol ( df ): vol = df . ix [:, 'volume' ] . diff () # this addition is for the convenience of Log y scale plot # vol +=1 vol = vol . rename ( 'vol_diff' ) openint = df . ix [:, 'openInterest' ] . diff () # this addition is for the convenience of Log y scale plot # openint += 1 openint = openint . rename ( 'openInt_diff' ) mid = ( df . ix [:, 'askPrc_0' ] + df . ix [:, 'bidPrc_0' ]) / 2. mid = mid . rename ( 'midPrc' ) ret = df . join ([ vol , openint , mid ]) return ret # ------------------------------------------------- def ForwardDiff ( df , n = 1 ): ''' The reverse of pandas' function 'DataFrame.diff()' ''' ret = df . diff ( periods = n ) ret = ret . shift ( periods = - 1 * n ) ret = ret . dropna () return ret def CutHighVar ( df , length = 200 ): ''' Purpose: Cut a small period after opening in the morning and at night. Because this time range, the var of price is high, which harmd our model. df: pd.DataFrame or pd.Series. With datetime index length: int. the length you want to cut, counted in ticks. Cannot be larger than 240 ''' ret = df bool_arr1 = np . logical_or ( ret . index . hour == 21 , ret . index . hour == 9 ) bool_arr = np . logical_and . reduce ([ bool_arr1 , ret . index . minute == 0 , ret . index . second <= int ( length // 4 ) - 1 ]) ret = ret [ np . logical_not ( bool_arr )] return ret def CutTail ( df , length = 60 ): ''' Purpose: Cut a small period before market close. df: pd.DataFrame or pd.Series. With datetime index length: int. the length you want to cut, counted in ticks. Cannot be larger than 240 ''' ret = df last_boolean1 = np . logical_and . reduce ( [ ret . index . hour == 14 , ret . index . minute == 59 , ret . index . second >= 60 - int ( length // 4 )]) # this is the last tick last_boolean2 = ret . index . hour == 15 ret = ret [ np . logical_not ( np . logical_or ( last_boolean1 , last_boolean2 ))] return ret def DayChangeNum ( ser , distance = 7 ): ''' ser is price move series after process. distance counting in hours ''' h = ser . index . hour h_diff = np . diff ( h ) h_diff = np . insert ( h_diff , 1 , 0 ) ret = np . where ( np . abs ( h_diff ) > distance )[ 0 ] return ret def NormPriceMove ( ser , daychgnum ): ret = ser . copy () for i in range ( len ( daychgnum ) - 1 ): mysamp = ret . iloc [ daychgnum [ i ]: daychgnum [ i + 1 ]] #print mysamp mystd = mysamp . std () print mystd ret . iloc [ daychgnum [ i ]: daychgnum [ i + 1 ]] /= mystd return ret def CuthlLimit ( df , how = 'all' , depth = 0 ): s1 = 'bidQty_' + str ( depth ) s2 = 'askQty_' + str ( depth ) if how == 'all' : arr1 = df . ix [:, s1 ] == 0 arr2 = df [ s2 ] == 0 bool_arr = np . logical_or ( arr1 , arr2 ) #bool_arr = np.logical_or(df[s1] == 0, df[s2] == 0) elif how == 'bid' : bool_arr = ( df [ s1 ] == 0 ) elif how == 'ask' : bool_arr = ( df [ s2 ] == 0 ) else : print 'ERROR!' return df [ np . logical_not ( bool_arr )] def GiveMePM ( df , n = 44 , lim = [ 0 , 20 ], cutdepth = 0 , norm = False , high_var_length = 200 ): ''' Purpose: from original DataFrame calculate price move Series. Including CutTail and CutHighVar. df: the pinzhong DataFrame. n: forward_ticks lim: can be like (0, 20), counting in days, or an int array of index. norm: if True, normalize the price move using every day std. Return (last) price move series. ''' global day_len samp = CuthlLimit ( df , how = 'all' , depth = cutdepth ) if len ( lim ) == 2 : samp = samp . ix [ day_len * lim [ 0 ]: day_len * lim [ 1 ], 'midPrc' ] else : samp = samp . ix [ lim , 'midPrc' ] #print samp.index[0], samp.index[-1] ret = ForwardDiff ( samp , n ) ret = CutTail ( ret , n ) ret = CutHighVar ( ret , length = high_var_length ) if norm : ret_daychangenum = DayChangeNum ( ret ) ret = NormPriceMove ( ret , ret_daychangenum ) return ret In [9]: ta . columns Out[9]: Index([u'AveragePrice', u'LifeHigh', u'LifeLow', u'TotalAskLot', u'TotalBidLot', u'askPrc_0', u'askPrc_1', u'askPrc_2', u'askPrc_3', u'askPrc_4', u'askQty_0', u'askQty_1', u'askQty_2', u'askQty_3', u'askQty_4', u'bidPrc_0', u'bidPrc_1', u'bidPrc_2', u'bidPrc_3', u'bidPrc_4', u'bidQty_0', u'bidQty_1', u'bidQty_2', u'bidQty_3', u'bidQty_4', u'close', u'high', u'highLimit', u'last', u'low', u'lowLimit', u'open', u'openInterest', u'prevClose', u'prevOpenInterest', u'prevSettle', u'settle', u'volume'], dtype='object') In [10]: ta = AddCol ( ta ) #------------------------------------------------ '''training dataset and outsample dataset''' ta_in = ta.ix[: day_len*20, :] ta_out = ta.ix[day_len*20: day_len*25: , :] forward_ticks = 45 ta_in_pm = ForwardDiff(ta_in.ix[:, 'last'], forward_ticks) ta_out_pm = ForwardDiff(ta_out.ix[:, 'last'], forward_ticks) ta_in_pm = CutTail(ta_in_pm, forward_ticks) ta_out_pm = CutTail(ta_out_pm, forward_ticks) ta_in_pm = CutHighVar(ta_in_pm) ta_out_pm = CutHighVar(ta_out_pm) # ta_in_daychangenum = DayChangeNum(ta_in_pm) # ta_out_daychangenum = DayChangeNum(ta_out_pm) # ta_in_pm_norm = NormPriceMove(ta_in_pm, ta_in_daychangenum) # ta_out_pm_norm = NormPriceMove(ta_out_pm, ta_out_daychangenum) In [24]: def myols ( ser , pm , norm = False ): ''' ser is indicator Series pm is Price move Series sm is satatsmodel module this function also automatically align index of df and pm ''' global sm ser = ser [ pm . index ] ser = ser . dropna () if norm : ser = ( ser - ser . mean ()) / ser . std () X = sm . add_constant ( ser ) Y = pm [ X . index ] #print Y[211000:211070] #print X[211000:211070] model = sm . OLS ( Y , X ) ret = model . fit () return ret def Rsquare ( y , yhat ): ret = 1 - ( y - yhat ) . var () / y . var () return ret def Rsquare2 ( y , yhat ): ret = 1 - (( y - yhat ) ** 2 ) . mean () / y . var () return ret def PredictedRsquare ( res , xnew , pm ): ''' pm: outsample price move Series xnew: indicator Series (or DataFrame) res: insample regression results (comes from statsmodel's model.fit() ) ''' # first we need to align xnew with outsample xnew = xnew [ pm . index ] xnew = xnew . dropna () y = pm [ xnew . index ] xnew = sm . add_constant ( xnew ) ynew = res . predict ( xnew ) rsq = Rsquare ( y , ynew ) return rsq def PredictedRsquare2 ( res , xnew , pm ): ''' pm: outsample price move Series xnew: indicator Series (or DataFrame) res: insample regression results (comes from statsmodel's model.fit() ) ''' # first we need to align xnew with outsample xnew = xnew [ pm . index ] xnew = xnew . dropna () y = pm [ xnew . index ] xnew = sm . add_constant ( xnew ) ynew = res . predict ( xnew ) rsq = Rsquare2 ( y , ynew ) return rsq =========================================================================== Advanced Plot In [189]: % matplotlib auto Using matplotlib backend: TkAgg In [187]: def prc_total ( df , t1 , t2 , fs = ( 15 , 10 )): fig = plt . figure ( figsize = fs ) ax1 = fig . add_subplot ( 311 ) ax1 . plot ( df . ix [ t1 : t2 , 'last' ], color = '#f5f112' , marker = '*' ) ax1 . plot ( df . ix [ t1 : t2 , 'askPrc_0' ], color = 'lightgreen' ) ax1 . plot ( df . ix [ t1 : t2 , 'bidPrc_0' ], color = 'lightcoral' ) ax3 = fig . add_subplot ( 312 , sharex = ax1 ) ax3 . plot ( df . ix [ t1 : t2 , 'vol_diff' ], color = 'white' , lw = 0.4 , marker = '*' ) ax4 = fig . add_subplot ( 313 , sharex = ax1 ) ax4 . plot ( df . ix [ t1 : t2 , 'openInt_diff' ], color = 'red' , marker = '*' ) return fig In [191]: # -------------------------------------------- '''this is for macroly searching for patterns''' t11 , t22 = '2015-12-05 21:00:01' , '2015-12-08 15:00:00' # samp = ta_10day.ix[pm_index, :] thefig = prc_total ( ta , t11 , t22 , ( 15 , 10 )) multi = MultiCursor ( thefig . canvas , thefig . axes , color = 'c' , lw = 1 ) thefig . show () In [137]: vwap_indicator = VWAPIndicator ( ta , 50 ) In [147]: ta . ix [ 120 : 190 , 'last' ] Out[147]: 2015-11-19 21:00:30.000 1827.0 2015-11-19 21:00:30.250 1827.0 2015-11-19 21:00:30.500 1827.0 2015-11-19 21:00:30.750 1827.0 2015-11-19 21:00:31.000 1827.0 2015-11-19 21:00:31.250 1828.0 2015-11-19 21:00:31.500 1828.0 2015-11-19 21:00:31.750 1827.0 2015-11-19 21:00:32.000 1828.0 2015-11-19 21:00:32.250 1827.0 2015-11-19 21:00:32.500 1828.0 2015-11-19 21:00:32.750 1827.0 2015-11-19 21:00:33.000 1827.0 2015-11-19 21:00:33.250 1828.0 2015-11-19 21:00:33.500 1828.0 2015-11-19 21:00:33.750 1827.0 2015-11-19 21:00:34.000 1828.0 2015-11-19 21:00:34.250 1828.0 2015-11-19 21:00:34.500 1828.0 2015-11-19 21:00:34.750 1828.0 2015-11-19 21:00:35.000 1829.0 2015-11-19 21:00:35.250 1828.0 2015-11-19 21:00:35.500 1828.0 2015-11-19 21:00:35.750 1828.0 2015-11-19 21:00:36.000 1828.0 2015-11-19 21:00:36.250 1829.0 2015-11-19 21:00:36.500 1829.0 2015-11-19 21:00:36.750 1829.0 2015-11-19 21:00:37.000 1829.0 2015-11-19 21:00:37.250 1829.0 ... 2015-11-19 21:00:40.000 1829.0 2015-11-19 21:00:40.250 1830.0 2015-11-19 21:00:40.500 1830.0 2015-11-19 21:00:40.750 1829.0 2015-11-19 21:00:41.000 1829.0 2015-11-19 21:00:41.250 1830.0 2015-11-19 21:00:41.500 1829.0 2015-11-19 21:00:41.750 1830.0 2015-11-19 21:00:42.000 1830.0 2015-11-19 21:00:42.250 1830.0 2015-11-19 21:00:42.500 1830.0 2015-11-19 21:00:42.750 1829.0 2015-11-19 21:00:43.000 1830.0 2015-11-19 21:00:43.250 1830.0 2015-11-19 21:00:43.500 1829.0 2015-11-19 21:00:43.750 1830.0 2015-11-19 21:00:44.000 1830.0 2015-11-19 21:00:44.250 1829.0 2015-11-19 21:00:44.500 1829.0 2015-11-19 21:00:44.750 1829.0 2015-11-19 21:00:45.000 1829.0 2015-11-19 21:00:45.250 1829.0 2015-11-19 21:00:45.500 1829.0 2015-11-19 21:00:45.750 1829.0 2015-11-19 21:00:46.000 1829.0 2015-11-19 21:00:46.250 1830.0 2015-11-19 21:00:46.500 1829.0 2015-11-19 21:00:46.750 1829.0 2015-11-19 21:00:47.000 1829.0 2015-11-19 21:00:47.250 1829.0 Name: last, dtype: float64 In [142]: ta_in_pm Out[142]: 2015-11-19 21:00:32.000 1.0 2015-11-19 21:00:32.250 2.0 2015-11-19 21:00:32.500 1.0 2015-11-19 21:00:32.750 2.0 2015-11-19 21:00:33.000 2.0 2015-11-19 21:00:33.250 1.0 2015-11-19 21:00:33.500 1.0 2015-11-19 21:00:33.750 3.0 2015-11-19 21:00:34.000 1.0 2015-11-19 21:00:34.250 1.0 2015-11-19 21:00:34.500 1.0 2015-11-19 21:00:34.750 1.0 2015-11-19 21:00:35.000 0.0 2015-11-19 21:00:35.250 1.0 2015-11-19 21:00:35.500 0.0 2015-11-19 21:00:35.750 0.0 2015-11-19 21:00:36.000 1.0 2015-11-19 21:00:36.250 0.0 2015-11-19 21:00:36.500 0.0 2015-11-19 21:00:36.750 0.0 2015-11-19 21:00:37.000 0.0 2015-11-19 21:00:37.250 -1.0 2015-11-19 21:00:37.500 1.0 2015-11-19 21:00:37.750 1.0 2015-11-19 21:00:38.000 -1.0 2015-11-19 21:00:38.250 0.0 2015-11-19 21:00:38.500 0.0 2015-11-19 21:00:38.750 0.0 2015-11-19 21:00:39.000 -1.0 2015-11-19 21:00:39.250 0.0 ... 2015-12-17 14:59:39.500 -1.0 2015-12-17 14:59:39.750 0.0 2015-12-17 14:59:40.000 -1.0 2015-12-17 14:59:40.250 1.0 2015-12-17 14:59:40.500 0.0 2015-12-17 14:59:40.750 1.0 2015-12-17 14:59:41.000 0.0 2015-12-17 14:59:41.250 0.0 2015-12-17 14:59:41.500 0.0 2015-12-17 14:59:41.750 0.0 2015-12-17 14:59:42.000 0.0 2015-12-17 14:59:42.250 0.0 2015-12-17 14:59:42.500 -1.0 2015-12-17 14:59:42.750 -1.0 2015-12-17 14:59:43.000 0.0 2015-12-17 14:59:43.250 1.0 2015-12-17 14:59:43.500 -1.0 2015-12-17 14:59:43.750 0.0 2015-12-17 14:59:44.000 0.0 2015-12-17 14:59:44.250 1.0 2015-12-17 14:59:44.500 0.0 2015-12-17 14:59:44.750 -1.0 2015-12-17 14:59:45.000 0.0 2015-12-17 14:59:45.250 0.0 2015-12-17 14:59:45.500 0.0 2015-12-17 14:59:45.750 0.0 2015-12-17 14:59:46.000 1.0 2015-12-17 14:59:46.250 0.0 2015-12-17 14:59:46.500 0.0 2015-12-17 14:59:46.750 1.0 Name: last, dtype: float64 In [12]: def VWAPIndicator4 ( df , mywindow = 50 ): ''' use both openInt and volume to calculate 'real' new position. ''' #TODO: ewm last = df . ix [:, 'midPrc' ] new_position = df . ix [:, [ 'vol_diff' , 'openInt_diff' ]] . sum ( axis = 1 ) new_position += . 1 last_multiply_newpos = last * new_position multiply_roll = last_multiply_newpos . rolling ( window = mywindow ) newpos_roll = new_position . rolling ( window = mywindow ) vwap = multiply_roll . sum () * 1. / newpos_roll . sum () #print vwap[:15] #print last[:15] ret = vwap - last ret . name = 'vwap_indicator2' vwap . name = 'vwaPrc2' return vwap , ret In [13]: def VWAPIndicator3 ( df , mywindow = 50 ): #TODO: ewm last = df . ix [:, 'midPrc' ] #print (last.isnull()).sum() vol = df . ix [:, 'vol_diff' ] vol += 1. #print (vol.isnull()).sum() last_multiply_vol = last * vol #print (last_multiply_vol.isnull()).sum() multiply_roll = last_multiply_vol . rolling ( window = mywindow ) vol_roll = vol . rolling ( window = mywindow ) vwap = multiply_roll . sum () * 1. / vol_roll . sum () #print (vwap.isnull()).sum() #print vwap[:15] #print last[:15] ret = vwap - last ret . name = 'vwap_indicator' vwap . name = 'vwaPrc' return vwap , ret TEST!!! In [14]: def GiveMeIndex ( arri , arro ): ''' Generate integer index arr is a two dim ndarray, with each element being a time range(counting in days). ''' global day_len index_in = list () for k in arri : index_in = index_in + list ( range ( day_len * k [ 0 ], day_len * k [ 1 ])) index_out = list () for k in arro : index_out = index_out + list ( range ( day_len * k [ 0 ], day_len * k [ 1 ])) return index_in , index_out In [15]: insample_index0 , outsample_index0 = GiveMeIndex ([[ 0 , 2 ], [ 4 , 6 ], [ 8 , 10 ], [ 14 , 16 ], [ 18 , 20 ], [ 22 , 24 ], [ 26 , 28 ]], [[ 2 , 4 ], [ 6 , 8 ], [ 12 , 14 ], [ 16 , 18 ], [ 20 , 22 ], [ 24 , 26 ], [ 28 , 30 ]]) insample_index1 , outsample_index1 = GiveMeIndex ([[ 0 , 20 ]], [[ 20 , 25 ]]) insample_index2 , outsample_index2 = GiveMeIndex ([[ 5 , 25 ]], [[ 0 , 5 ]]) insample_index3 , outsample_index3 = GiveMeIndex ([[ 0 , 5 ], [ 10 , 25 ]], [[ 5 , 10 ]]) insample_index4 , outsample_index4 = GiveMeIndex ([[ 0 , 10 ], [ 15 , 25 ]], [[ 10 , 15 ]]) insample_index5 , outsample_index5 = GiveMeIndex ([[ 0 , 13 ]], [[ 13 , 25 ]]) insample_index6 , outsample_index6 = GiveMeIndex ([[ 0 , 18 ]], [[ 18 , 25 ]]) # different_io_index = ((insample_index0, outsample_index0), (insample_index1, outsample_index1), # (insample_index2, outsample_index2), (insample_index3, outsample_index3), # (insample_index4, outsample_index4), (insample_index5, outsample_index5)) insample_index00 , outsample_index00 = GiveMeIndex ([[ 0 , 20 ]], [[ 25 , 30 ]]) In [26]: #------------------------------------------------------------------------------- ''' Automatically generate in and out sample data, then calculate Qty_indicator, then regression under different parameters ''' for mywind in [ 10 , 30 , 100 , 240 , 1000 , 2400 ]: vwap , vwap_indicator = VWAPIndicator4 ( ta , mywind ) #print pd.concat([ta[['last','vol_diff']],vwap,vwap_indicator],axis=1) for forward_ticks in range ( 44 , 45 , 1 ): ta_in_pm = GiveMePM ( ta , n = forward_ticks , lim = insample_index1 ) #print pd.concat([ta_in_pm,ta['last']],axis=1).dropna() ta_out_pm = GiveMePM ( ta , n = forward_ticks , lim = outsample_index1 ) #df = pd.concat([vwap_indicator, ta_in_pm],axis=1) #df.dropna(inplace=True) res = myols ( vwap_indicator , ta_in_pm ) print ( ' \\n\\n\\n ------------------------------X length: %d , Y length: %d ------------------------------' % ( mywind , forward_ticks )) print ( 'In sample time range: %s to %s \\n Out sample time range: %s to %s . \\n ' % ( ta_in_pm . index [ 0 ], ta_in_pm . index [ - 1 ], ta_out_pm . index [ 0 ], ta_out_pm . index [ - 1 ])) print res . summary () #print ta_in_pm.describe() #print ta_out_pm.describe() print ' \\n [OutSample R_SQUARE: %f ]' % PredictedRsquare ( res , vwap_indicator , ta_out_pm ) print ' \\n [OutSample R_SQUARE: %f ]' % PredictedRsquare2 ( res , vwap_indicator , ta_out_pm ) ------------------------------X length: 10, Y length: 44 ------------------------------ In sample time range: 2015-11-19 21:00:50 to 2015-12-17 21:15:53.250000 Out sample time range: 2015-12-17 21:16:04.500000 to 2015-12-24 21:15:53.250000. OLS Regression Results ============================================================================== Dep. Variable: midPrc R-squared: 0.000 Model: OLS Adj. R-squared: 0.000 Method: Least Squares F-statistic: 3.764 Date: Sun, 17 Jul 2016 Prob (F-statistic): 0.0524 Time: 04:26:26 Log-Likelihood: -3.1137e+06 No. Observations: 1790936 AIC: 6.227e+06 Df Residuals: 1790934 BIC: 6.227e+06 Df Model: 1 =================================================================================== coef std err t P>|t| [95.0% Conf. Int.] ----------------------------------------------------------------------------------- const 0.0037 0.001 3.634 0.000 0.002 0.006 vwap_indicator2 0.0002 0.000 1.940 0.052 -2.04e-06 0.000 ============================================================================== Omnibus: 644865.163 Durbin-Watson: 0.083 Prob(Omnibus): 0.000 Jarque-Bera (JB): 134740837.563 Skew: 0.553 Prob(JB): 0.00 Kurtosis: 45.478 Cond. No. 10.0 ============================================================================== [OutSample R_SQUARE: 0.000012] [OutSample R_SQUARE: -0.000010] ------------------------------X length: 30, Y length: 44 ------------------------------ In sample time range: 2015-11-19 21:00:50 to 2015-12-17 21:15:53.250000 Out sample time range: 2015-12-17 21:16:04.500000 to 2015-12-24 21:15:53.250000. OLS Regression Results ============================================================================== Dep. Variable: midPrc R-squared: 0.000 Model: OLS Adj. R-squared: -0.000 Method: Least Squares F-statistic: 0.08203 Date: Sun, 17 Jul 2016 Prob (F-statistic): 0.775 Time: 04:26:31 Log-Likelihood: -3.1137e+06 No. Observations: 1790936 AIC: 6.227e+06 Df Residuals: 1790934 BIC: 6.227e+06 Df Model: 1 =================================================================================== coef std err t P>|t| [95.0% Conf. Int.] ----------------------------------------------------------------------------------- const 0.0037 0.001 3.624 0.000 0.002 0.006 vwap_indicator2 1.726e-05 6.03e-05 0.286 0.775 -0.000 0.000 ============================================================================== Omnibus: 644857.802 Durbin-Watson: 0.084 Prob(Omnibus): 0.000 Jarque-Bera (JB): 134737775.005 Skew: 0.553 Prob(JB): 0.00 Kurtosis: 45.478 Cond. No. 17.1 ============================================================================== [OutSample R_SQUARE: 0.000002] [OutSample R_SQUARE: -0.000020] ------------------------------X length: 100, Y length: 44 ------------------------------ In sample time range: 2015-11-19 21:00:50 to 2015-12-17 21:15:53.250000 Out sample time range: 2015-12-17 21:16:04.500000 to 2015-12-24 21:15:53.250000. OLS Regression Results ============================================================================== Dep. Variable: midPrc R-squared: 0.000 Model: OLS Adj. R-squared: 0.000 Method: Least Squares F-statistic: 32.92 Date: Sun, 17 Jul 2016 Prob (F-statistic): 9.62e-09 Time: 04:26:36 Log-Likelihood: -3.1137e+06 No. Observations: 1790936 AIC: 6.227e+06 Df Residuals: 1790934 BIC: 6.227e+06 Df Model: 1 =================================================================================== coef std err t P>|t| [95.0% Conf. Int.] ----------------------------------------------------------------------------------- const 0.0036 0.001 3.510 0.000 0.002 0.006 vwap_indicator2 -0.0002 4.17e-05 -5.737 0.000 -0.000 -0.000 ============================================================================== Omnibus: 644789.252 Durbin-Watson: 0.084 Prob(Omnibus): 0.000 Jarque-Bera (JB): 134724711.407 Skew: 0.553 Prob(JB): 0.00 Kurtosis: 45.476 Cond. No. 24.7 ============================================================================== [OutSample R_SQUARE: -0.000047] [OutSample R_SQUARE: -0.000070] ------------------------------X length: 240, Y length: 44 ------------------------------ In sample time range: 2015-11-19 21:00:50 to 2015-12-17 21:15:53.250000 Out sample time range: 2015-12-17 21:16:04.500000 to 2015-12-24 21:15:53.250000. OLS Regression Results ============================================================================== Dep. Variable: midPrc R-squared: 0.000 Model: OLS Adj. R-squared: 0.000 Method: Least Squares F-statistic: 36.77 Date: Sun, 17 Jul 2016 Prob (F-statistic): 1.33e-09 Time: 04:26:41 Log-Likelihood: -3.1133e+06 No. Observations: 1790896 AIC: 6.227e+06 Df Residuals: 1790894 BIC: 6.227e+06 Df Model: 1 =================================================================================== coef std err t P>|t| [95.0% Conf. Int.] ----------------------------------------------------------------------------------- const 0.0037 0.001 3.595 0.000 0.002 0.006 vwap_indicator2 -0.0002 3.44e-05 -6.064 0.000 -0.000 -0.000 ============================================================================== Omnibus: 645479.661 Durbin-Watson: 0.084 Prob(Omnibus): 0.000 Jarque-Bera (JB): 134872204.819 Skew: 0.555 Prob(JB): 0.00 Kurtosis: 45.499 Cond. No. 29.9 ============================================================================== [OutSample R_SQUARE: -0.000047] [OutSample R_SQUARE: -0.000069] ------------------------------X length: 1000, Y length: 44 ------------------------------ In sample time range: 2015-11-19 21:00:50 to 2015-12-17 21:15:53.250000 Out sample time range: 2015-12-17 21:16:04.500000 to 2015-12-24 21:15:53.250000. OLS Regression Results ============================================================================== Dep. Variable: midPrc R-squared: 0.000 Model: OLS Adj. R-squared: 0.000 Method: Least Squares F-statistic: 68.01 Date: Sun, 17 Jul 2016 Prob (F-statistic): 1.63e-16 Time: 04:26:47 Log-Likelihood: -3.1109e+06 No. Observations: 1790136 AIC: 6.222e+06 Df Residuals: 1790134 BIC: 6.222e+06 Df Model: 1 =================================================================================== coef std err t P>|t| [95.0% Conf. Int.] ----------------------------------------------------------------------------------- const 0.0037 0.001 3.597 0.000 0.002 0.006 vwap_indicator2 -0.0003 3.32e-05 -8.247 0.000 -0.000 -0.000 ============================================================================== Omnibus: 646241.117 Durbin-Watson: 0.084 Prob(Omnibus): 0.000 Jarque-Bera (JB): 135452805.439 Skew: 0.558 Prob(JB): 0.00 Kurtosis: 45.600 Cond. No. 31.0 ============================================================================== [OutSample R_SQUARE: -0.000080] [OutSample R_SQUARE: -0.000101] ------------------------------X length: 2400, Y length: 44 ------------------------------ In sample time range: 2015-11-19 21:00:50 to 2015-12-17 21:15:53.250000 Out sample time range: 2015-12-17 21:16:04.500000 to 2015-12-24 21:15:53.250000. OLS Regression Results ============================================================================== Dep. Variable: midPrc R-squared: 0.000 Model: OLS Adj. R-squared: 0.000 Method: Least Squares F-statistic: 21.98 Date: Sun, 17 Jul 2016 Prob (F-statistic): 2.76e-06 Time: 04:26:52 Log-Likelihood: -3.1083e+06 No. Observations: 1788736 AIC: 6.217e+06 Df Residuals: 1788734 BIC: 6.217e+06 Df Model: 1 =================================================================================== coef std err t P>|t| [95.0% Conf. Int.] ----------------------------------------------------------------------------------- const 0.0038 0.001 3.668 0.000 0.002 0.006 vwap_indicator2 -0.0002 3.52e-05 -4.688 0.000 -0.000 -9.61e-05 ============================================================================== Omnibus: 646138.873 Durbin-Watson: 0.084 Prob(Omnibus): 0.000 Jarque-Bera (JB): 135685503.581 Skew: 0.559 Prob(JB): 0.00 Kurtosis: 45.653 Cond. No. 29.2 ============================================================================== [OutSample R_SQUARE: -0.000052] [OutSample R_SQUARE: -0.000073] In [66]: TEMP1 = pd . concat ([ ta1 , vwap_indicator , vwap ], axis = 1 ) In [69]: vwap . ix [ '2015-11-23 23:13:40' : '2015-11-23 23:13:50' ] Out[69]: 2015-11-23 23:13:40.000 4416.0 2015-11-23 23:13:40.250 4416.0 2015-11-23 23:13:40.500 4416.0 2015-11-23 23:13:40.750 4416.0 2015-11-23 23:13:41.000 4416.0 2015-11-23 23:13:41.250 4416.0 2015-11-23 23:13:41.500 4416.0 2015-11-23 23:13:41.750 4416.0 2015-11-23 23:13:42.000 4416.0 2015-11-23 23:13:42.250 4416.0 2015-11-23 23:13:42.500 4416.0 2015-11-23 23:13:42.750 4416.0 2015-11-23 23:13:43.000 4416.0 2015-11-23 23:13:43.250 4416.0 2015-11-23 23:13:43.500 4418.0 2015-11-23 23:13:43.750 4418.0 2015-11-23 23:13:44.000 4418.0 2015-11-23 23:13:44.250 4418.0 2015-11-23 23:13:44.500 4418.0 2015-11-23 23:13:44.750 4418.0 2015-11-23 23:13:45.000 4418.0 2015-11-23 23:13:45.250 4418.0 2015-11-23 23:13:45.500 4416.0 2015-11-23 23:13:45.750 4416.0 2015-11-23 23:13:46.000 4418.0 2015-11-23 23:13:46.250 4416.0 2015-11-23 23:13:46.500 4418.0 2015-11-23 23:13:46.750 4418.0 2015-11-23 23:13:47.000 4418.0 2015-11-23 23:13:47.250 4418.0 2015-11-23 23:13:47.500 4418.0 2015-11-23 23:13:47.750 4418.0 2015-11-23 23:13:48.000 4418.0 2015-11-23 23:13:48.250 4418.0 2015-11-23 23:13:48.500 4418.0 2015-11-23 23:13:48.750 4418.0 2015-11-23 23:13:49.000 4418.0 2015-11-23 23:13:49.250 4418.0 2015-11-23 23:13:49.500 4418.0 2015-11-23 23:13:49.750 4420.0 2015-11-23 23:13:50.000 4420.0 2015-11-23 23:13:50.250 4418.0 2015-11-23 23:13:50.500 4418.0 2015-11-23 23:13:50.750 4418.0 Name: vwaPrc, dtype: float64 Out[69]: 2015-11-23 23:13:40.000 4416.0 2015-11-23 23:13:40.250 4416.0 2015-11-23 23:13:40.500 4416.0 2015-11-23 23:13:40.750 4416.0 2015-11-23 23:13:41.000 4416.0 2015-11-23 23:13:41.250 4416.0 2015-11-23 23:13:41.500 4416.0 2015-11-23 23:13:41.750 4416.0 2015-11-23 23:13:42.000 4416.0 2015-11-23 23:13:42.250 4416.0 2015-11-23 23:13:42.500 4416.0 2015-11-23 23:13:42.750 4416.0 2015-11-23 23:13:43.000 4416.0 2015-11-23 23:13:43.250 4416.0 2015-11-23 23:13:43.500 4418.0 2015-11-23 23:13:43.750 4418.0 2015-11-23 23:13:44.000 4418.0 2015-11-23 23:13:44.250 4418.0 2015-11-23 23:13:44.500 4418.0 2015-11-23 23:13:44.750 4418.0 2015-11-23 23:13:45.000 4418.0 2015-11-23 23:13:45.250 4418.0 2015-11-23 23:13:45.500 4416.0 2015-11-23 23:13:45.750 4416.0 2015-11-23 23:13:46.000 4418.0 2015-11-23 23:13:46.250 4416.0 2015-11-23 23:13:46.500 4418.0 2015-11-23 23:13:46.750 4418.0 2015-11-23 23:13:47.000 4418.0 2015-11-23 23:13:47.250 4418.0 2015-11-23 23:13:47.500 4418.0 2015-11-23 23:13:47.750 4418.0 2015-11-23 23:13:48.000 4418.0 2015-11-23 23:13:48.250 4418.0 2015-11-23 23:13:48.500 4418.0 2015-11-23 23:13:48.750 4418.0 2015-11-23 23:13:49.000 4418.0 2015-11-23 23:13:49.250 4418.0 2015-11-23 23:13:49.500 4418.0 2015-11-23 23:13:49.750 4420.0 2015-11-23 23:13:50.000 4420.0 2015-11-23 23:13:50.250 4418.0 2015-11-23 23:13:50.500 4418.0 2015-11-23 23:13:50.750 4418.0 Name: vwaPrc, dtype: float64 Out[69]: 2015-11-23 23:13:40.000 4416.0 2015-11-23 23:13:40.250 4416.0 2015-11-23 23:13:40.500 4416.0 2015-11-23 23:13:40.750 4416.0 2015-11-23 23:13:41.000 4416.0 2015-11-23 23:13:41.250 4416.0 2015-11-23 23:13:41.500 4416.0 2015-11-23 23:13:41.750 4416.0 2015-11-23 23:13:42.000 4416.0 2015-11-23 23:13:42.250 4416.0 2015-11-23 23:13:42.500 4416.0 2015-11-23 23:13:42.750 4416.0 2015-11-23 23:13:43.000 4416.0 2015-11-23 23:13:43.250 4416.0 2015-11-23 23:13:43.500 4418.0 2015-11-23 23:13:43.750 4418.0 2015-11-23 23:13:44.000 4418.0 2015-11-23 23:13:44.250 4418.0 2015-11-23 23:13:44.500 4418.0 2015-11-23 23:13:44.750 4418.0 2015-11-23 23:13:45.000 4418.0 2015-11-23 23:13:45.250 4418.0 2015-11-23 23:13:45.500 4416.0 2015-11-23 23:13:45.750 4416.0 2015-11-23 23:13:46.000 4418.0 2015-11-23 23:13:46.250 4416.0 2015-11-23 23:13:46.500 4418.0 2015-11-23 23:13:46.750 4418.0 2015-11-23 23:13:47.000 4418.0 2015-11-23 23:13:47.250 4418.0 2015-11-23 23:13:47.500 4418.0 2015-11-23 23:13:47.750 4418.0 2015-11-23 23:13:48.000 4418.0 2015-11-23 23:13:48.250 4418.0 2015-11-23 23:13:48.500 4418.0 2015-11-23 23:13:48.750 4418.0 2015-11-23 23:13:49.000 4418.0 2015-11-23 23:13:49.250 4418.0 2015-11-23 23:13:49.500 4418.0 2015-11-23 23:13:49.750 4420.0 2015-11-23 23:13:50.000 4420.0 2015-11-23 23:13:50.250 4418.0 2015-11-23 23:13:50.500 4418.0 2015-11-23 23:13:50.750 4418.0 Name: vwaPrc, dtype: float64 In [71]: TEMP1 . ix [ '2015-11-23 23:13:40' : '2015-11-23 23:13:50' , [ 'last' , 'volume' , 'vol_diff' , 'vwap' , 'vwap_indicator' ]] Out[71]: last volume vol_diff vwap vwap_indicator 2015-11-23 23:13:40.000 4416.0 559906.0 4.0 NaN 0.0 2015-11-23 23:13:40.250 4416.0 559914.0 8.0 NaN 0.0 2015-11-23 23:13:40.500 4416.0 559914.0 0.0 NaN 0.0 2015-11-23 23:13:40.750 4416.0 559914.0 0.0 NaN 0.0 2015-11-23 23:13:41.000 4416.0 559914.0 0.0 NaN 0.0 2015-11-23 23:13:41.250 4416.0 559914.0 0.0 NaN 0.0 2015-11-23 23:13:41.500 4416.0 559914.0 0.0 NaN 0.0 2015-11-23 23:13:41.750 4416.0 559914.0 0.0 NaN 0.0 2015-11-23 23:13:42.000 4416.0 559914.0 0.0 NaN 0.0 2015-11-23 23:13:42.250 4416.0 559914.0 0.0 NaN 0.0 2015-11-23 23:13:42.500 4416.0 559916.0 2.0 NaN 0.0 2015-11-23 23:13:42.750 4416.0 559916.0 0.0 NaN 0.0 2015-11-23 23:13:43.000 4416.0 559916.0 0.0 NaN 0.0 2015-11-23 23:13:43.250 4416.0 559916.0 0.0 NaN 0.0 2015-11-23 23:13:43.500 4418.0 559918.0 2.0 NaN 0.0 2015-11-23 23:13:43.750 4418.0 559918.0 0.0 NaN 0.0 2015-11-23 23:13:44.000 4418.0 559924.0 6.0 NaN 0.0 2015-11-23 23:13:44.250 4418.0 559924.0 0.0 NaN 0.0 2015-11-23 23:13:44.500 4418.0 559924.0 0.0 NaN 0.0 2015-11-23 23:13:44.750 4418.0 559924.0 0.0 NaN 0.0 2015-11-23 23:13:45.000 4418.0 559924.0 0.0 NaN 0.0 2015-11-23 23:13:45.250 4418.0 559924.0 0.0 NaN 0.0 2015-11-23 23:13:45.500 4416.0 559934.0 10.0 NaN 0.0 2015-11-23 23:13:45.750 4416.0 559934.0 0.0 NaN 0.0 2015-11-23 23:13:46.000 4418.0 559940.0 6.0 NaN 0.0 2015-11-23 23:13:46.250 4416.0 559942.0 2.0 NaN 0.0 2015-11-23 23:13:46.500 4418.0 560542.0 600.0 NaN 0.0 2015-11-23 23:13:46.750 4418.0 560542.0 0.0 NaN 0.0 2015-11-23 23:13:47.000 4418.0 560542.0 0.0 NaN 0.0 2015-11-23 23:13:47.250 4418.0 560576.0 34.0 NaN 0.0 2015-11-23 23:13:47.500 4418.0 560594.0 18.0 NaN 0.0 2015-11-23 23:13:47.750 4418.0 560610.0 16.0 NaN 0.0 2015-11-23 23:13:48.000 4418.0 560610.0 0.0 NaN 0.0 2015-11-23 23:13:48.250 4418.0 560610.0 0.0 NaN 0.0 2015-11-23 23:13:48.500 4418.0 560610.0 0.0 NaN 0.0 2015-11-23 23:13:48.750 4418.0 560612.0 2.0 NaN 0.0 2015-11-23 23:13:49.000 4418.0 560612.0 0.0 NaN 0.0 2015-11-23 23:13:49.250 4418.0 560612.0 0.0 NaN 0.0 2015-11-23 23:13:49.500 4418.0 560612.0 0.0 NaN 0.0 2015-11-23 23:13:49.750 4420.0 560692.0 80.0 NaN 0.0 2015-11-23 23:13:50.000 4420.0 560736.0 44.0 NaN 0.0 2015-11-23 23:13:50.250 4418.0 560738.0 2.0 NaN 0.0 2015-11-23 23:13:50.500 4418.0 560738.0 0.0 NaN 0.0 2015-11-23 23:13:50.750 4418.0 560738.0 0.0 NaN 0.0 In [50]: ta1 . ix [ '2015-11-23 23:13:40' : '2015-11-23 23:13:50' , [ 'last' , 'volume' , 'vol_diff' ]] Out[50]: last volume vol_diff 2015-11-23 23:13:40.000 4416.0 559906.0 4.0 2015-11-23 23:13:40.250 4416.0 559914.0 8.0 2015-11-23 23:13:40.500 4416.0 559914.0 0.0 2015-11-23 23:13:40.750 4416.0 559914.0 0.0 2015-11-23 23:13:41.000 4416.0 559914.0 0.0 2015-11-23 23:13:41.250 4416.0 559914.0 0.0 2015-11-23 23:13:41.500 4416.0 559914.0 0.0 2015-11-23 23:13:41.750 4416.0 559914.0 0.0 2015-11-23 23:13:42.000 4416.0 559914.0 0.0 2015-11-23 23:13:42.250 4416.0 559914.0 0.0 2015-11-23 23:13:42.500 4416.0 559916.0 2.0 2015-11-23 23:13:42.750 4416.0 559916.0 0.0 2015-11-23 23:13:43.000 4416.0 559916.0 0.0 2015-11-23 23:13:43.250 4416.0 559916.0 0.0 2015-11-23 23:13:43.500 4418.0 559918.0 2.0 2015-11-23 23:13:43.750 4418.0 559918.0 0.0 2015-11-23 23:13:44.000 4418.0 559924.0 6.0 2015-11-23 23:13:44.250 4418.0 559924.0 0.0 2015-11-23 23:13:44.500 4418.0 559924.0 0.0 2015-11-23 23:13:44.750 4418.0 559924.0 0.0 2015-11-23 23:13:45.000 4418.0 559924.0 0.0 2015-11-23 23:13:45.250 4418.0 559924.0 0.0 2015-11-23 23:13:45.500 4416.0 559934.0 10.0 2015-11-23 23:13:45.750 4416.0 559934.0 0.0 2015-11-23 23:13:46.000 4418.0 559940.0 6.0 2015-11-23 23:13:46.250 4416.0 559942.0 2.0 2015-11-23 23:13:46.500 4418.0 560542.0 600.0 2015-11-23 23:13:46.750 4418.0 560542.0 0.0 2015-11-23 23:13:47.000 4418.0 560542.0 0.0 2015-11-23 23:13:47.250 4418.0 560576.0 34.0 2015-11-23 23:13:47.500 4418.0 560594.0 18.0 2015-11-23 23:13:47.750 4418.0 560610.0 16.0 2015-11-23 23:13:48.000 4418.0 560610.0 0.0 2015-11-23 23:13:48.250 4418.0 560610.0 0.0 2015-11-23 23:13:48.500 4418.0 560610.0 0.0 2015-11-23 23:13:48.750 4418.0 560612.0 2.0 2015-11-23 23:13:49.000 4418.0 560612.0 0.0 2015-11-23 23:13:49.250 4418.0 560612.0 0.0 2015-11-23 23:13:49.500 4418.0 560612.0 0.0 2015-11-23 23:13:49.750 4420.0 560692.0 80.0 2015-11-23 23:13:50.000 4420.0 560736.0 44.0 2015-11-23 23:13:50.250 4418.0 560738.0 2.0 2015-11-23 23:13:50.500 4418.0 560738.0 0.0 2015-11-23 23:13:50.750 4418.0 560738.0 0.0 In [27]: ta1 . ix [ '2015-11-23 23:13:50' : '2015-11-23 23:14:04' , [ 'last' , 'volume' , 'vol_diff' ]] Out[27]: last volume vol_diff 2015-11-23 23:13:50.000 4420.0 560736.0 44.0 2015-11-23 23:13:50.250 4418.0 560738.0 2.0 2015-11-23 23:13:50.500 4418.0 560738.0 0.0 2015-11-23 23:13:50.750 4418.0 560738.0 0.0 2015-11-23 23:13:51.000 4418.0 560740.0 2.0 2015-11-23 23:13:51.250 4418.0 560740.0 0.0 2015-11-23 23:13:51.500 4420.0 560840.0 100.0 2015-11-23 23:13:51.750 4420.0 560840.0 0.0 2015-11-23 23:13:52.000 4420.0 560850.0 10.0 2015-11-23 23:13:52.250 4420.0 560850.0 0.0 2015-11-23 23:13:52.500 4418.0 560860.0 10.0 2015-11-23 23:13:52.750 4418.0 560860.0 0.0 2015-11-23 23:13:53.000 4418.0 560860.0 0.0 2015-11-23 23:13:53.250 4418.0 560860.0 0.0 2015-11-23 23:13:53.500 4418.0 560860.0 0.0 2015-11-23 23:13:53.750 4418.0 560860.0 0.0 2015-11-23 23:13:54.000 4420.0 560880.0 20.0 2015-11-23 23:13:54.250 4420.0 560880.0 0.0 2015-11-23 23:13:54.500 4418.0 560890.0 10.0 2015-11-23 23:13:54.750 4418.0 560890.0 0.0 2015-11-23 23:13:55.000 4420.0 560994.0 104.0 2015-11-23 23:13:55.250 4420.0 560994.0 0.0 2015-11-23 23:13:55.500 4420.0 560994.0 0.0 2015-11-23 23:13:55.750 4420.0 560994.0 0.0 2015-11-23 23:13:56.000 4420.0 561196.0 202.0 2015-11-23 23:13:56.250 4420.0 561196.0 0.0 2015-11-23 23:13:56.500 4420.0 561278.0 82.0 2015-11-23 23:13:56.750 4420.0 561284.0 6.0 2015-11-23 23:13:57.000 4420.0 561288.0 4.0 2015-11-23 23:13:57.250 4420.0 561288.0 0.0 2015-11-23 23:13:57.500 4420.0 561288.0 0.0 2015-11-23 23:13:57.750 4420.0 561288.0 0.0 2015-11-23 23:13:58.000 4420.0 561296.0 8.0 2015-11-23 23:13:58.250 4420.0 561296.0 0.0 2015-11-23 23:13:58.500 4420.0 561296.0 0.0 2015-11-23 23:13:58.750 4420.0 561296.0 0.0 2015-11-23 23:13:59.000 4420.0 561304.0 8.0 2015-11-23 23:13:59.250 4420.0 561528.0 224.0 2015-11-23 23:13:59.500 4420.0 561528.0 0.0 2015-11-23 23:13:59.750 4422.0 561530.0 2.0 2015-11-23 23:14:00.000 4420.0 561550.0 20.0 2015-11-23 23:14:00.250 4420.0 561550.0 0.0 2015-11-23 23:14:00.500 4420.0 561552.0 2.0 2015-11-23 23:14:00.750 4420.0 561552.0 0.0 2015-11-23 23:14:01.000 4420.0 561552.0 0.0 2015-11-23 23:14:01.250 4422.0 561692.0 140.0 2015-11-23 23:14:01.500 4422.0 561692.0 0.0 2015-11-23 23:14:01.750 4422.0 561692.0 0.0 2015-11-23 23:14:02.000 4422.0 561692.0 0.0 2015-11-23 23:14:02.250 4422.0 561694.0 2.0 2015-11-23 23:14:02.500 4422.0 561694.0 0.0 2015-11-23 23:14:02.750 4422.0 561694.0 0.0 2015-11-23 23:14:03.000 4422.0 561714.0 20.0 2015-11-23 23:14:03.250 4420.0 561724.0 10.0 2015-11-23 23:14:03.500 4420.0 561736.0 12.0 2015-11-23 23:14:03.750 4420.0 561736.0 0.0 2015-11-23 23:14:04.000 4420.0 561736.0 0.0 2015-11-23 23:14:04.250 4420.0 561736.0 0.0 2015-11-23 23:14:04.500 4420.0 561736.0 0.0 2015-11-23 23:14:04.750 4420.0 561738.0 2.0 In [345]: % matplotlib inline In [297]: plt . plot ( vwap . index , ta . ix [ vwap . index , 'last' ]) plt . plot ( vwap . index , vwap ) Out[297]: [ ] In [270]: len ( vwap_indicator ) Out[270]: 2700120 In [271]: len ( ta_in_pm ) Out[271]: 1791180 In [272]: day_len * 20 Out[272]: 1800080 In [310]: day_len * 20 - len ( ta_in_pm ) Out[310]: 8900 In [242]: ( 200 + 44 ) * 20 Out[242]: 4880 In [303]: temp = vwap_indicator [ ta_in_pm . index ] In [307]: temp = temp . dropna () In [309]: ( vwap_indicator . isnull ()) . sum () Out[309]: 40 In [308]: len ( temp ) Out[308]: 1791180 In [284]: vwap , vwap_indicator = VWAPIndicator3 ( ta , 40 ) 0 1 1 40 In [ ]: y = pm [ xnew . index ] In [321]: % matplotlib inline In [48]: # -------------------------------------------- '''plot fit''' fig , ax = plt . subplots () fig = sm . graphics . plot_fit ( res , res . model . exog_names [ 1 ], ax = ax ) In [54]: vwap_indicator . hist ( bins = np . arange ( - 10.25 , 10.25 , . 5 )) Out[54]: In [35]: ta_pm = GiveMePM ( ta , n = 44 , lim = [ 0 , 30 ]) In [53]: vwap , vwap_indicator = VWAPIndicator4 ( ta , 240 ) vwap_indicator = vwap_indicator [ ta_pm . index ] In [57]: ta_pm . hist ( bins = np . arange ( - 50.5 , 50.5 , 1 )) Out[57]: Re check! In [185]: t11 , t22 = '2015-11-25 23:03:06.000' , '2015-11-25 23:03:12.000' In [186]: plt . plot ( ta . ix [ t11 : t22 , 'vol_diff' ]) #plt.ylim([0,3000]) Out[186]: [ ] In [183]: ta . ix [ t11 : t22 , [ 'last' , 'volume' , 'vol_diff' ]] Out[183]: last volume vol_diff 2015-11-25 22:03:06.000 1775.0 148528.0 0.0 2015-11-25 22:03:06.250 1775.0 148528.0 0.0 2015-11-25 22:03:06.500 1775.0 148528.0 0.0 2015-11-25 22:03:06.750 1775.0 148528.0 0.0 2015-11-25 22:03:07.000 1775.0 148528.0 0.0 2015-11-25 22:03:07.250 1775.0 148528.0 0.0 2015-11-25 22:03:07.500 1775.0 148528.0 0.0 2015-11-25 22:03:07.750 1775.0 148528.0 0.0 2015-11-25 22:03:08.000 1775.0 148528.0 0.0 2015-11-25 22:03:08.250 1775.0 148528.0 0.0 2015-11-25 22:03:08.500 1775.0 148528.0 0.0 2015-11-25 22:03:08.750 1775.0 148528.0 0.0 2015-11-25 22:03:09.000 1775.0 148528.0 0.0 2015-11-25 22:03:09.250 1775.0 148528.0 0.0 2015-11-25 22:03:09.500 1775.0 148528.0 0.0 2015-11-25 22:03:09.750 1775.0 148530.0 2.0 2015-11-25 22:03:10.000 1775.0 148530.0 0.0 2015-11-25 22:03:10.250 1775.0 148530.0 0.0 2015-11-25 22:03:10.500 1775.0 148530.0 0.0 2015-11-25 22:03:10.750 1775.0 148530.0 0.0 2015-11-25 22:03:11.000 1775.0 148530.0 0.0 2015-11-25 22:03:11.250 1775.0 148530.0 0.0 2015-11-25 22:03:11.500 1775.0 148530.0 0.0 2015-11-25 22:03:11.750 1775.0 148530.0 0.0 2015-11-25 22:03:12.000 1775.0 148530.0 0.0 2015-11-25 22:03:12.250 1775.0 148530.0 0.0 2015-11-25 22:03:12.500 1775.0 148530.0 0.0 2015-11-25 22:03:12.750 1775.0 148532.0 2.0 In [170]: vwap_indicator [ t11 : t22 ] Out[170]: 2015-12-01 11:03:06.000 0.0 2015-12-01 11:03:06.250 0.0 2015-12-01 11:03:06.500 0.0 2015-12-01 11:03:06.750 0.0 2015-12-01 11:03:07.000 0.0 2015-12-01 11:03:07.250 0.0 2015-12-01 11:03:07.500 0.0 2015-12-01 11:03:07.750 0.0 2015-12-01 11:03:08.000 0.0 2015-12-01 11:03:08.250 0.0 2015-12-01 11:03:08.500 0.0 2015-12-01 11:03:08.750 0.0 2015-12-01 11:03:09.000 0.0 2015-12-01 11:03:09.250 0.0 2015-12-01 11:03:09.500 0.0 2015-12-01 11:03:09.750 0.0 2015-12-01 11:03:10.000 0.0 2015-12-01 11:03:10.250 0.0 2015-12-01 11:03:10.500 0.0 2015-12-01 11:03:10.750 0.0 2015-12-01 11:03:11.000 0.0 2015-12-01 11:03:11.250 0.0 2015-12-01 11:03:11.500 0.0 2015-12-01 11:03:11.750 0.0 2015-12-01 11:03:12.000 0.0 2015-12-01 11:03:12.250 0.0 2015-12-01 11:03:12.500 0.0 2015-12-01 11:03:12.750 0.0 Name: vwap_indicator, dtype: float64 In [171]: vwap [ t11 : t22 ] Out[171]: 2015-12-01 11:03:06.000 1822.0 2015-12-01 11:03:06.250 1822.0 2015-12-01 11:03:06.500 1822.0 2015-12-01 11:03:06.750 1822.0 2015-12-01 11:03:07.000 1822.0 2015-12-01 11:03:07.250 1822.0 2015-12-01 11:03:07.500 1822.0 2015-12-01 11:03:07.750 1822.0 2015-12-01 11:03:08.000 1822.0 2015-12-01 11:03:08.250 1822.0 2015-12-01 11:03:08.500 1822.0 2015-12-01 11:03:08.750 1822.0 2015-12-01 11:03:09.000 1822.0 2015-12-01 11:03:09.250 1822.0 2015-12-01 11:03:09.500 1822.0 2015-12-01 11:03:09.750 1822.0 2015-12-01 11:03:10.000 1822.0 2015-12-01 11:03:10.250 1822.0 2015-12-01 11:03:10.500 1822.0 2015-12-01 11:03:10.750 1822.0 2015-12-01 11:03:11.000 1822.0 2015-12-01 11:03:11.250 1822.0 2015-12-01 11:03:11.500 1822.0 2015-12-01 11:03:11.750 1822.0 2015-12-01 11:03:12.000 1822.0 2015-12-01 11:03:12.250 1822.0 2015-12-01 11:03:12.500 1822.0 2015-12-01 11:03:12.750 1822.0 Name: vwaPrc, dtype: float64 In [247]: ta . ix [ '2015-11-19 21:00:55.000' : '2015-11-19 21:01:58.000' , 'last' ][: 55 ] Out[247]: 2015-11-19 21:00:55.000 4508.0 2015-11-19 21:00:55.250 4510.0 2015-11-19 21:00:55.500 4510.0 2015-11-19 21:00:55.750 4508.0 2015-11-19 21:00:56.000 4506.0 2015-11-19 21:00:56.250 4508.0 2015-11-19 21:00:56.500 4508.0 2015-11-19 21:00:56.750 4508.0 2015-11-19 21:00:57.000 4510.0 2015-11-19 21:00:57.250 4508.0 2015-11-19 21:00:57.500 4508.0 2015-11-19 21:00:57.750 4510.0 2015-11-19 21:00:58.000 4508.0 2015-11-19 21:00:58.250 4510.0 2015-11-19 21:00:58.500 4508.0 2015-11-19 21:00:58.750 4508.0 2015-11-19 21:00:59.000 4506.0 2015-11-19 21:00:59.250 4506.0 2015-11-19 21:00:59.500 4508.0 2015-11-19 21:00:59.750 4508.0 2015-11-19 21:01:00.000 4508.0 2015-11-19 21:01:00.250 4508.0 2015-11-19 21:01:00.500 4506.0 2015-11-19 21:01:00.750 4508.0 2015-11-19 21:01:01.000 4508.0 2015-11-19 21:01:01.250 4508.0 2015-11-19 21:01:01.500 4506.0 2015-11-19 21:01:01.750 4506.0 2015-11-19 21:01:02.000 4506.0 2015-11-19 21:01:02.250 4506.0 2015-11-19 21:01:02.500 4506.0 2015-11-19 21:01:02.750 4506.0 2015-11-19 21:01:03.000 4506.0 2015-11-19 21:01:03.250 4504.0 2015-11-19 21:01:03.500 4504.0 2015-11-19 21:01:03.750 4504.0 2015-11-19 21:01:04.000 4500.0 2015-11-19 21:01:04.250 4500.0 2015-11-19 21:01:04.500 4502.0 2015-11-19 21:01:04.750 4496.0 2015-11-19 21:01:05.000 4500.0 2015-11-19 21:01:05.250 4500.0 2015-11-19 21:01:05.500 4500.0 2015-11-19 21:01:05.750 4500.0 2015-11-19 21:01:06.000 4500.0 2015-11-19 21:01:06.250 4500.0 2015-11-19 21:01:06.500 4500.0 2015-11-19 21:01:06.750 4500.0 2015-11-19 21:01:07.000 4502.0 2015-11-19 21:01:07.250 4502.0 2015-11-19 21:01:07.500 4502.0 2015-11-19 21:01:07.750 4502.0 2015-11-19 21:01:08.000 4504.0 2015-11-19 21:01:08.250 4504.0 2015-11-19 21:01:08.500 4506.0 Name: last, dtype: float64 In [241]: ta_in_pm . ix [ '2015-11-19 21:00:55.000' : '2015-11-19 21:00:58.000' ] Out[241]: 2015-11-19 21:00:55.000 -6.0 2015-11-19 21:00:55.250 -8.0 2015-11-19 21:00:55.500 -6.0 2015-11-19 21:00:55.750 -4.0 2015-11-19 21:00:56.000 0.0 2015-11-19 21:00:56.250 -4.0 2015-11-19 21:00:56.500 -4.0 2015-11-19 21:00:56.750 0.0 2015-11-19 21:00:57.000 -6.0 2015-11-19 21:00:57.250 -6.0 2015-11-19 21:00:57.500 -6.0 2015-11-19 21:00:57.750 -8.0 2015-11-19 21:00:58.000 -4.0 2015-11-19 21:00:58.250 -6.0 2015-11-19 21:00:58.500 -4.0 2015-11-19 21:00:58.750 -6.0 Name: last, dtype: float64 In [197]: % matplotlib inline In [ ]: temp1 In [195]: vwap_indicator Out[195]: 2015-11-19 21:00:00.000 NaN 2015-11-19 21:00:00.250 NaN 2015-11-19 21:00:00.500 NaN 2015-11-19 21:00:00.750 NaN 2015-11-19 21:00:01.000 NaN 2015-11-19 21:00:01.250 NaN 2015-11-19 21:00:01.500 NaN 2015-11-19 21:00:01.750 NaN 2015-11-19 21:00:02.000 NaN 2015-11-19 21:00:02.250 NaN 2015-11-19 21:00:02.500 NaN 2015-11-19 21:00:02.750 NaN 2015-11-19 21:00:03.000 NaN 2015-11-19 21:00:03.250 NaN 2015-11-19 21:00:03.500 NaN 2015-11-19 21:00:03.750 NaN 2015-11-19 21:00:04.000 -0.937409 2015-11-19 21:00:04.250 0.060734 2015-11-19 21:00:04.500 -0.929339 2015-11-19 21:00:04.750 -0.714008 2015-11-19 21:00:05.000 0.297571 2015-11-19 21:00:05.250 -0.350000 2015-11-19 21:00:05.500 -0.332349 2015-11-19 21:00:05.750 -1.180602 2015-11-19 21:00:06.000 -0.941915 2015-11-19 21:00:06.250 -0.854938 2015-11-19 21:00:06.500 -0.824089 2015-11-19 21:00:06.750 -0.815873 2015-11-19 21:00:07.000 0.222222 2015-11-19 21:00:07.250 -0.748031 ... 2015-12-31 14:59:52.750 0.930693 2015-12-31 14:59:53.000 -0.069307 2015-12-31 14:59:53.250 -0.060000 2015-12-31 14:59:53.500 0.824561 2015-12-31 14:59:53.750 0.800000 2015-12-31 14:59:54.000 0.781250 2015-12-31 14:59:54.250 0.592593 2015-12-31 14:59:54.500 0.584906 2015-12-31 14:59:54.750 0.584906 2015-12-31 14:59:55.000 -0.365385 2015-12-31 14:59:55.250 0.473684 2015-12-31 14:59:55.500 0.444444 2015-12-31 14:59:55.750 -0.869565 2015-12-31 14:59:56.000 0.115385 2015-12-31 14:59:56.250 0.056604 2015-12-31 14:59:56.500 -0.909091 2015-12-31 14:59:56.750 -0.857143 2015-12-31 14:59:57.000 -0.607595 2015-12-31 14:59:57.250 -0.369231 2015-12-31 14:59:57.500 0.666667 2015-12-31 14:59:57.750 0.645669 2015-12-31 14:59:58.000 -0.348837 2015-12-31 14:59:58.250 0.656250 2015-12-31 14:59:58.500 0.656250 2015-12-31 14:59:58.750 0.656250 2015-12-31 14:59:59.000 0.585714 2015-12-31 14:59:59.250 -0.382550 2015-12-31 14:59:59.500 0.613333 2015-12-31 14:59:59.750 -0.389262 2015-12-31 15:00:00.000 -0.376712 Name: vwap_indicator2, dtype: float64 In [133]: ta_out_pm . plot () Out[133]: Black??? In [82]: for mywindow in [ 10 , 60 , 200 , 500 , 1000 , 2400 , 5000 , 10000 , 24000 ]: print ' \\n\\n\\n ---------------mywindow: %d ----------------------' % mywindow #mywindow = 2400 * 3 vol_roll = ta . ix [:, 'volume' ] . rolling ( window = mywindow ) last_multiply_vol = ta . ix [:, 'last' ] * ta . ix [:, 'volume' ] multi_roll = last_multiply_vol . rolling ( window = mywindow ) vwap = multi_roll . sum () * 1. / vol_roll . sum () vwap_indicator = vwap - ta . ix [:, 'last' ] # vwap_indicator.dropna(inplace=True) #------------------------------------------------------------------------------- ''' Automatically generate in and out sample data, then calculate Qty_indicator, then regression under different parameters ''' insample_index = list () for l in [[ 0 , 2 ], [ 4 , 6 ], [ 8 , 10 ], [ 14 , 16 ], [ 18 , 20 ], [ 22 , 24 ], [ 26 , 28 ]]: insample_index = insample_index + list ( range ( day_len * l [ 0 ], day_len * l [ 1 ])) outsample_index = list () for l in [[ 2 , 4 ], [ 6 , 8 ], [ 12 , 14 ], [ 16 , 18 ], [ 20 , 22 ], [ 24 , 26 ], [ 28 , 30 ]]: outsample_index = outsample_index + list ( range ( day_len * l [ 0 ], day_len * l [ 1 ])) for forward_ticks in range ( 50 , 52 , 2 ): ta_in_pm = GiveMePM ( ta , n = forward_ticks , lim = [ 0 , 20 ]) ta_out_pm = GiveMePM ( ta , n = forward_ticks , lim = [ 25 , 30 ]) res = myols ( vwap_indicator , ta_in_pm ) print ' \\n\\n\\n --------------------- %d ----------------------' % forward_ticks print res . summary () print ' \\n [OutSample R_SQUARE: %f ]' % ( PredictedRsquare ( res , vwap_indicator , ta_out_pm ))[ 1 ] ---------------mywindow: 10 ---------------------- --------------------- 50 ---------------------- OLS Regression Results ============================================================================== Dep. Variable: last R-squared: 0.106 Model: OLS Adj. R-squared: 0.106 Method: Least Squares F-statistic: 2.121e+05 Date: Thu, 14 Jul 2016 Prob (F-statistic): 0.00 Time: 07:41:41 Log-Likelihood: -3.5288e+06 No. Observations: 1793900 AIC: 7.058e+06 Df Residuals: 1793898 BIC: 7.058e+06 Df Model: 1 ============================================================================== coef std err t P>|t| [95.0% Conf. Int.] ------------------------------------------------------------------------------ const 0.0046 0.001 3.587 0.000 0.002 0.007 None 0.7456 0.002 460.545 0.000 0.742 0.749 ============================================================================== Omnibus: 507024.499 Durbin-Watson: 0.214 Prob(Omnibus): 0.000 Jarque-Bera (JB): 39368879.141 Skew: 0.415 Prob(JB): 0.00 Kurtosis: 25.935 Cond. No. 1.25 ============================================================================== [OutSample R_SQUARE: 0.122631] ---------------mywindow: 60 ---------------------- --------------------- 50 ---------------------- OLS Regression Results ============================================================================== Dep. Variable: last R-squared: 0.076 Model: OLS Adj. R-squared: 0.076 Method: Least Squares F-statistic: 1.472e+05 Date: Thu, 14 Jul 2016 Prob (F-statistic): 0.00 Time: 07:41:45 Log-Likelihood: -3.5583e+06 No. Observations: 1793900 AIC: 7.117e+06 Df Residuals: 1793898 BIC: 7.117e+06 Df Model: 1 ============================================================================== coef std err t P>|t| [95.0% Conf. Int.] ------------------------------------------------------------------------------ const 0.0057 0.001 4.365 0.000 0.003 0.008 None 0.4290 0.001 383.677 0.000 0.427 0.431 ============================================================================== Omnibus: 520812.501 Durbin-Watson: 0.250 Prob(Omnibus): 0.000 Jarque-Bera (JB): 39272475.183 Skew: 0.478 Prob(JB): 0.00 Kurtosis: 25.902 Cond. No. 1.17 ============================================================================== [OutSample R_SQUARE: 0.081837] ---------------mywindow: 200 ---------------------- --------------------- 50 ---------------------- OLS Regression Results ============================================================================== Dep. Variable: last R-squared: 0.023 Model: OLS Adj. R-squared: 0.023 Method: Least Squares F-statistic: 4.208e+04 Date: Thu, 14 Jul 2016 Prob (F-statistic): 0.00 Time: 07:41:49 Log-Likelihood: -3.6080e+06 No. Observations: 1793829 AIC: 7.216e+06 Df Residuals: 1793827 BIC: 7.216e+06 Df Model: 1 ============================================================================== coef std err t P>|t| [95.0% Conf. Int.] ------------------------------------------------------------------------------ const 0.0043 0.001 3.209 0.001 0.002 0.007 None 0.1336 0.001 205.131 0.000 0.132 0.135 ============================================================================== Omnibus: 472450.178 Durbin-Watson: 0.310 Prob(Omnibus): 0.000 Jarque-Bera (JB): 31917539.398 Skew: 0.334 Prob(JB): 0.00 Kurtosis: 23.654 Cond. No. 2.07 ============================================================================== [OutSample R_SQUARE: 0.013947] ---------------mywindow: 500 ---------------------- --------------------- 50 ---------------------- OLS Regression Results ============================================================================== Dep. Variable: last R-squared: 0.007 Model: OLS Adj. R-squared: 0.007 Method: Least Squares F-statistic: 1.320e+04 Date: Thu, 14 Jul 2016 Prob (F-statistic): 0.00 Time: 07:41:53 Log-Likelihood: -3.6213e+06 No. Observations: 1793529 AIC: 7.243e+06 Df Residuals: 1793527 BIC: 7.243e+06 Df Model: 1 ============================================================================== coef std err t P>|t| [95.0% Conf. Int.] ------------------------------------------------------------------------------ const 0.0031 0.001 2.247 0.025 0.000 0.006 None 0.0430 0.000 114.877 0.000 0.042 0.044 ============================================================================== Omnibus: 450416.004 Durbin-Watson: 0.334 Prob(Omnibus): 0.000 Jarque-Bera (JB): 26258295.086 Skew: 0.308 Prob(JB): 0.00 Kurtosis: 21.735 Cond. No. 3.64 ============================================================================== [OutSample R_SQUARE: 0.002693] ---------------mywindow: 1000 ---------------------- --------------------- 50 ---------------------- OLS Regression Results ============================================================================== Dep. Variable: last R-squared: 0.004 Model: OLS Adj. R-squared: 0.004 Method: Least Squares F-statistic: 7867. Date: Thu, 14 Jul 2016 Prob (F-statistic): 0.00 Time: 07:41:58 Log-Likelihood: -3.6223e+06 No. Observations: 1793029 AIC: 7.245e+06 Df Residuals: 1793027 BIC: 7.245e+06 Df Model: 1 ============================================================================== coef std err t P>|t| [95.0% Conf. Int.] ------------------------------------------------------------------------------ const 0.0028 0.001 2.069 0.039 0.000 0.005 None 0.0230 0.000 88.698 0.000 0.022 0.023 ============================================================================== Omnibus: 447160.915 Durbin-Watson: 0.339 Prob(Omnibus): 0.000 Jarque-Bera (JB): 24993957.951 Skew: 0.316 Prob(JB): 0.00 Kurtosis: 21.280 Cond. No. 5.26 ============================================================================== [OutSample R_SQUARE: 0.001277] ---------------mywindow: 2400 ---------------------- --------------------- 50 ---------------------- OLS Regression Results ============================================================================== Dep. Variable: last R-squared: 0.002 Model: OLS Adj. R-squared: 0.002 Method: Least Squares F-statistic: 4191. Date: Thu, 14 Jul 2016 Prob (F-statistic): 0.00 Time: 07:42:02 Log-Likelihood: -3.6211e+06 No. Observations: 1791629 AIC: 7.242e+06 Df Residuals: 1791627 BIC: 7.242e+06 Df Model: 1 ============================================================================== coef std err t P>|t| [95.0% Conf. Int.] ------------------------------------------------------------------------------ const 0.0023 0.001 1.703 0.089 -0.000 0.005 None 0.0111 0.000 64.737 0.000 0.011 0.011 ============================================================================== Omnibus: 444553.349 Durbin-Watson: 0.342 Prob(Omnibus): 0.000 Jarque-Bera (JB): 24377265.848 Skew: 0.315 Prob(JB): 0.00 Kurtosis: 21.060 Cond. No. 7.97 ============================================================================== [OutSample R_SQUARE: 0.000621] ---------------mywindow: 5000 ---------------------- --------------------- 50 ---------------------- OLS Regression Results ============================================================================== Dep. Variable: last R-squared: 0.001 Model: OLS Adj. R-squared: 0.001 Method: Least Squares F-statistic: 2268. Date: Thu, 14 Jul 2016 Prob (F-statistic): 0.00 Time: 07:42:07 Log-Likelihood: -3.6169e+06 No. Observations: 1789029 AIC: 7.234e+06 Df Residuals: 1789027 BIC: 7.234e+06 Df Model: 1 ============================================================================== coef std err t P>|t| [95.0% Conf. Int.] ------------------------------------------------------------------------------ const 0.0025 0.001 1.792 0.073 -0.000 0.005 None 0.0058 0.000 47.620 0.000 0.006 0.006 ============================================================================== Omnibus: 442249.583 Durbin-Watson: 0.343 Prob(Omnibus): 0.000 Jarque-Bera (JB): 23995176.643 Skew: 0.313 Prob(JB): 0.00 Kurtosis: 20.931 Cond. No. 11.3 ============================================================================== [OutSample R_SQUARE: 0.000328] ---------------mywindow: 10000 ---------------------- --------------------- 50 ---------------------- OLS Regression Results ============================================================================== Dep. Variable: last R-squared: 0.000 Model: OLS Adj. R-squared: 0.000 Method: Least Squares F-statistic: 842.0 Date: Thu, 14 Jul 2016 Prob (F-statistic): 4.43e-185 Time: 07:42:11 Log-Likelihood: -3.6082e+06 No. Observations: 1784029 AIC: 7.216e+06 Df Residuals: 1784027 BIC: 7.216e+06 Df Model: 1 ============================================================================== coef std err t P>|t| [95.0% Conf. Int.] ------------------------------------------------------------------------------ const 0.0026 0.001 1.877 0.060 -0.000 0.005 None 0.0025 8.6e-05 29.017 0.000 0.002 0.003 ============================================================================== Omnibus: 439920.805 Durbin-Watson: 0.344 Prob(Omnibus): 0.000 Jarque-Bera (JB): 23757886.879 Skew: 0.310 Prob(JB): 0.00 Kurtosis: 20.867 Cond. No. 16.0 ============================================================================== [OutSample R_SQUARE: 0.000128] ---------------mywindow: 24000 ---------------------- --------------------- 50 ---------------------- OLS Regression Results ============================================================================== Dep. Variable: last R-squared: 0.000 Model: OLS Adj. R-squared: 0.000 Method: Least Squares F-statistic: 475.2 Date: Thu, 14 Jul 2016 Prob (F-statistic): 2.44e-105 Time: 07:42:15 Log-Likelihood: -3.5825e+06 No. Observations: 1770029 AIC: 7.165e+06 Df Residuals: 1770027 BIC: 7.165e+06 Df Model: 1 ============================================================================== coef std err t P>|t| [95.0% Conf. Int.] ------------------------------------------------------------------------------ const 0.0018 0.001 1.324 0.185 -0.001 0.005 None 0.0012 5.67e-05 21.799 0.000 0.001 0.001 ============================================================================== Omnibus: 435736.170 Durbin-Watson: 0.344 Prob(Omnibus): 0.000 Jarque-Bera (JB): 23563592.016 Skew: 0.306 Prob(JB): 0.00 Kurtosis: 20.864 Cond. No. 24.4 ============================================================================== [OutSample R_SQUARE: 0.000081] In [ ]: if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) { var mathjaxscript = document.createElement('script'); mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#'; mathjaxscript.type = 'text/javascript'; mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; mathjaxscript[(window.opera ? \"innerHTML\" : \"text\")] = \"MathJax.Hub.Config({\" + \" config: ['MMLorHTML.js'],\" + \" TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },\" + \" jax: ['input/TeX','input/MathML','output/HTML-CSS'],\" + \" extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js'],\" + \" displayAlign: 'center',\" + \" displayIndent: '0em',\" + \" showMathMenu: true,\" + \" tex2jax: { \" + \" inlineMath: [ ['$','$'] ], \" + \" displayMath: [ ['$$','$$'] ],\" + \" processEscapes: true,\" + \" preview: 'TeX',\" + \" }, \" + \" 'HTML-CSS': { \" + \" styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }\" + \" } \" + \"}); \"; (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript); }","tags":"quant","title":"Price Indicator Research"},{"url":"https://brillliantz.github.io/MySite/thoughts/SecondTermOfFreshmanSummary.html","text":"﻿14-15 大一下学期总结 对于迷茫的我来说，大一这一年的信息量就像是考试周一样多。参加了活动，报名了课外班，听了几场青年论坛讲座，先后和物院、计科、电子的教授进行了一对一面谈，也在学期结束之时用上了学校的职业规划中心和心理咨询中心。具体过程就不讲了，只讲感悟，还有我的想法。 有人说人生=价值观+方法论，我想再加上个生活情趣，也就齐了。这篇总结就从这三个大方面来说。 价值观 \"多年前的某一天，坐在课堂上发呆的你，老师的声音越飘越远，那时候的你觉得2008年的奥运遥远得不可想象，也不知道自己2015身在何方，窗外的树上，一群麻雀叽喳着飞过，粉笔砸中你的头，老师让你站着听课，同学们在窃窃私语，窗外的树叶滑落，没人注意到时间它那么仓促，再次想起是否想重新来过？\" 两个追求 一个追求是我们常说的狭义的理想，比如做科学家、作家、导演……第二个追求则是更加理想化的理想——抛去世俗的一切，假设物质资源充裕有求必应，你想做什么？比如吃个痛快、你侬我侬、甚至杀人越货……对我来说，这个\"理想化的理想\"还不甚明确，目前大致的感觉就是享乐。不过平时的一些事倒可能有一些提示作用，比如看到至真至诚的爱情和恢宏壮阔的场景时心中的澎湃之感。这一点也许人们都有 ，而能感觉到明显程度高于常人的便是对美的追求，包括对女生进行审美时的资深外貌协会，对壁纸、墙纸的追求和对文本排版、配色、字体的偏执。所以我将旅游定为人生的终极目标应该还是蛮有道理的。当然想要明确这个，还得没事多多意淫才行。这个与第一个追求没什么联系，最多也就是在职业选择时考虑会不会存在有时间赚钱没时间花钱的问题。无论这个是什么都得先把第一个追求好才行。 第一个追求就是所谓专业方向，职业规划了。入学时没有爱好的专业，就图方便报了理科。理科嘛，未来可以搞研究，继续深造，美帝全奖PhD是上选；也可以转个弯投身业界，或工或商。这一学期已经明确了我对搞科研是无爱的，那么读不读PhD就成了问题。PhD优点是可以在去顶尖名校也满足出国浪的愿望，缺点就是五年青春拜拜了，每天xx小时的学术实在艰苦卓绝不能忍受，尽管做别的也一定是艰苦的奋斗。再者PhD对工商科的价值都不大，暂时只听过quant职位的对数理PhD有偏爱，所以它也价值不高。这个仍需要多看看体验类问题。如果没什么别的发现，那还有个折衷的方案，就是去欧洲国家读master，当然这就更需要查找信息了。 如果觉得自己不会出国，心里会不自主地有点小侥幸——出国对成绩的要求最为苛刻，而且还需要各种科研经历发表文章等。这个时候必须时刻敲打自己：想去四大中金fb一样要的是变态的GPA，想搞工科一样要大量的项目经验和实习经历，TOFEL什么的相比以后工作对英语的要求只是小小巫。更重要的，人要给自己留出选择，在这个看似恋爱自由职业自由的世界我们的命运实则很多时候由不得自己，能自己做出选择的权利就像自由的权利一样宝贵，而这个权利是拼出来的。 比较大的可能是本科之后转去工科，希望能够在数理知识和计算机工具结合的领域工作，目前看来金融工程这个方向是比较合适的，主要是我对金融市场一直很感兴趣。然而这还只是一个模糊的目标，对着模糊的目标奋斗可能就会跑偏，应该不断清晰化。我崇尚比较精准的准备，直接针对具体的一个或几个职位的要求。同时也就需要考虑，除了专业知识之外，这些职位的性质能否符合我的个人特点，比如我是个追求效率，喜欢刺激，喜欢喝人打交道但是方案传统的\"礼尚往来\"的人，这些都是需要进一步了解的。 除了就业，也有创业这个选择，听车三百的CEO所讲的\"创业者的特质\"，感觉跟自己很像，高中班主任也评价我除了学习不错之外，还善于表达组织等，以后是开拓创业的类型。可是我自己却总希望的是一个稳定的职位，每天完成规定的工作拿到薪水开开心心，或许这只是我希望呆在舒适区的懒惰的表现，人人都像这样没有压力地生活。我认为这个应该在实习中尝试。更有可能的是在工作之后，才会有更加成熟的想法。 最近一个同学跟我谈心，是遇到了类似的迷茫问题，而且他感觉完全没有动力去学习提高，不知道该做点什么。想起芍芳的名言\"谁的青春不迷茫\"。跟他谈的时候，我说的有条有理头头是道的，这就让我发现有时往往给别人说的很溜，却不知道用相同的方式反省下自己。作为学基础学科却身在曹营心在汉的人，很是需要找到一些类似的人进行交流，给刚才那位同学建议的时候我让他去发帖去搜索尽一切努力找一定有跟他想法一致的，那我不也应该这样做吗？碰巧的是，下午在一个群里咨询相关问题，正好就碰到了一个同样身在曹营心在汉的同学，他说他这一学期也一直在努力搜寻信息，而且暑期已经迈出了实习的脚步，欣喜之余，我也受到了鞭策。总之有小伙伴感觉真好。 目标与自我评价 为什么我会很期待每一门考试成绩？为什么无论接下来有没有考试，考完一门就想要放松呢？这是没有目标啊。没有自己的目标，考试就成了目标，不能以自己是否达成目标来评价自己，考试，或者说与周围的人比较，就成了唯一的评价标准。然而，层次越高，周围的人也就越强，而且是全方位地越来越强。现在似乎我还可以按照自己认为的全面发展发展得不错（跟别人比较），然而我必然会抵达更高处，继续与别人这么比下去必定是会受挫的，顶尖的学生在藤校自杀的新闻也不鲜见呢。有了自己的目标和方向，时时刻刻都会朝着它走，以它来评价自己，既不会受到其他评价体系的干扰，也可从中自得其乐，我想这才是好的。 由于完美主义的性格，做什么事情都喜欢追求极致也包括追求细节。家长说不要事事求最好，累；一位长者说，年轻人就应该有\"要做就做最好\"的精神。我想这可以结合之前目标导向来考虑，目标是在前方的那么就应该把前方的事情做好，至于一旁的东西就不要太关注，精力是有限的。完美主义也带来缺点，小的事情很容易精雕细琢，而繁杂冗长的事情就不太能把握，除了事先的计划之外，也应该时常跳出来审视全局。 方法论 珍惜时间提高效率，for what？ ——世界那么精彩，美好的人和事太多，生命如此短暂，想抓住每一刻。 勤与懒 懒，是我从小就有的一个大问题。比如给别人建议，我擅长很快给出一些泛泛的、别人和自己都觉得很有道理的答复，却懒得思考这些条条里面的细节；比如遇到了什么问题先知乎后百度实在不行翻墙谷歌，喜欢看别人的喜欢做伸手党而不是自己用力思考；一个本来有顺序的东西，却总是想先搞定其中简单的跳过难的，这样票面上看起来进度很快实际效果却不然，跳来跳去最影响效率。 懒的第三点在这一年已经得到了一些改善，前两点则是最近得到了很大启发。院里请了张永德来做讲座，张老师讲了勤奋的三境界——一是多学少玩，二是多思考，三是讲悟。原来把别人喝咖啡时间用来看书只是最低一级，这也让我反省到从高三以来自以为的勤奋还差得远。这几天一直在写总结，便在空闲的时候努力的思考，果然有所收获，刚刚出去接个水的时间就想到了如果将多思考作为我目前勤奋的\"价值观\"，那么之前做职业规划时一位老师所说就可以作为方法论！她告诉我，即使一个职业测试会给出不靠谱的结果，我们也能有效的利用它，方法便是在做测试题目（往往都是选择判断）的时候，关注自己内心是怎么想的、根据什么标准来做出的选择判断，这样便可以明晰自己的内心。那么平常在路上思考问题，不仅要想问题本身，也要想清楚自己在想什么、为什么这样想。之前我只停留在最低的那个阶段，有的时候为了所谓的勤，对时间过度珍惜、对效率过度追求，上着课，还非要利用一些老师讲课的空档看点别的书，导致两个都受影响，甚至变成玩手机。又比如看公开课非把速度调的很快，课的进度是快了，但是没有读书思考和笔记，知识就像流水一样冲过去了。现在认为最好的解决方案还是疯狂思考——跟着节奏联想，如果老师慢了就一直想。今天专门点了个公开课测试了一下，他讲到A，我就一直想AA,AB,BA,AXX,AYY……效果奇佳。 勤是需要坚持的，记得打WOW的时候，30元的点卡可以换12K金，也就是1元=400金，400金在游戏里是比较可观的一笔钱，这样就让我平常省下来的每一块钱都有了意义——少花1元可是400金入账啊。这样只要我还在玩魔兽，就能坚持过\"简朴生活\"。那么对于勤，如果能建立这样一套自我奖励机制，就会好坚持的多。比如我现在不想码字想看一个公开课，那么当我想着快点写完就能多看一集，就会很有继续写下去的动力。另外，还想起一个人说\"努力的过程中看不到什么成果也没有什么快乐，但是等到一切pay off，又会忽然觉得做的都是值得的\"。最近一位跟留学中介打电话的时候，知道了能申什么学校，基本取决于本科的GPA，也给我说了我目前的水平能申什么学校，那些校名，仅是听着就令人激动，瞬间就觉得成绩果然还是非常好使的通货。 这个\"自我奖励机制\"等于是利用了人的生理特点。这让我还想起了\"长短半衰期理论\"，人如果一直做短半衰期的事情，寻求短期刺激，那么他的大脑就会适应这种模式，跟吸了毒一样停不下来。典例如一直刷动态，网游升级刷装备等。前几天认真玩了孤岛危机3，欣赏了一把顶级的画面，这对我是有意义的因为我是画面党；后来又玩了天涯明月刀，发现网游也做得越来越好了，用得唐门，发现开始的4、5个技能就这么有意思，就像继续玩玩看后续技能。这个时候反思了一下：我玩这个网游目的只是体验，而不断升级开发技能则是在追求短期刺激，于是果断不玩了。在做一些事的时候，时常需要停下来反思——当初的目的是什么？现在是否是在寻求短半衰期的重复刺激？ 方法论真的重要 我一直非常重视方法论——虽然上文说了过于依赖也不好——有时会怀疑自己是不是过于看重方法，张永德（又是他）老师让我安心了——方法论就是非常重要。因为天赋已定，勤奋大家都会，方法就是最有文章可做的地方了。他举例说看书尽量看大家的、看原著，别人写的可能读起来简单，但是别人都不一定理解了，跟着他们看就跑偏了。我自己能想到的则是期末疯狂看了好多物理，感觉到好教材对学习效率影响很大，想分辨教材最好是两本对比着看。并且由于连着看了两天，在短时间内体验到了学习曲线——开始陡峭后来平缓，所以一定要坚持住开头的恶心与不适啊。 方法论有时也不求高深，尤其是基础的东西都没做好的时候。张老师的讲座结束后专门去单独问他，想听听这个经验无比丰富又这么重视方法的人，会说些什么惊天地泣鬼神的方法。没想到他举出的例子却都是非常基础的，就说一个：如果是好老师上课，一定不要被其他任何事情干扰，死死盯住老师，听好每一句话，可能5句漏了1句就不懂了。这让我想起原来听广辉讲课，那绝对是聚精会神，可是现在却没做到。仔细反思，确实有很多基础的东西没做好，这是需要优先改进的地方。 时间管理 只需要做好这一条，就足够拥有漂亮的成绩并且在社团活动、课业和个人娱乐之间游刃有余！高中生们为了高考可以简单的把生活分为\"学习\"和\"其他\"两类，当前者不够的时候，就压缩后者。这大概就是为什么很多人会怀念那个只有一个目标，可以专心努力的时光。然而现在一切都不同了，人的能力是多元化的，学业只是其中的一元，学业中还分理论和实验呢？活动要花精力参加，实习是要自己去敲，人际关系要维持，杂务要收拾……这还没算走亲访友和给孩子换尿布。这才是接近现实的世界，一个每时每刻都可能有各种突发事件来打扰你的生活，日程表上排满了乱七八糟的东西的世界。这学期的成绩都很难看，每出来一门都有反思，想来想去觉得每一门都实在不难，只要平常好好学或者考前抱好佛脚，就不会有别的障碍阻止你拿高分。所以成绩的问题反映的是我不能合理安排生活的问题。比如最后一次考化学，前面都复习得很好，剩下一章内容，就坐不住开始浪结果最后就因为这一章坑到了自己。比如这学期做了很多不同的事所以周末常常没有时间干别的，那么我应该想：为什么做之前没有考虑好周末的问题呢？为什么不在工作日提前抓紧点呢？想起两个东西，一个是之前在空间转得很多的： 千万不要自己感动自己。大部分人看似的努力不过是愚蠢导致的。什么熬夜看书到天亮，连续几天只睡几小时，多久没放假了，如果这些也值得夸耀，那富士康流水线上任何一个人都比你努力多了。人难免天生有自怜的情绪，唯有时刻保持清醒，才能看清真正的价值在哪里。 另一个则是\"极度自律是怎样的体验\"问题下的一个回答的节选： 其实，我觉得年轻人抱怨没时间是一件很羞愧的事。因为没时间就其实等于没能力，没能力的人才没时间。我认识的真正自律高效的人，个人时间都能个人把控，因为效率、高效，在有效的工作时间内把工作都安排的有条不紊。自律是每个人都必须学会的一种本能。 ……（省略一部分） 我从没担心自己会挂科，没考前看书心慌的头皮发麻。 没有后悔过自己做过的任何一个决定。 从没有懊悔自己时光的虚度。 我拿奖学金吃吃喝喝，甚至能靠自己强大的能力赚每个月生活费。 本科申请offer一个拒信都没有全票过，发出去的简历都能有回音，一点也不担心以后的工作问题。 努力换的日子过得舒心，这就是我对生活的选择。 没时间 = 没能力，就是这样。 作息。开始追求早睡早起是为了健康、害怕秃头之类的，最近越来越觉得想高效率地学习\"高大上\"的东西，必须要非常清醒甚至是亢奋这都是良好作息习惯带来的短期目标、计划与due。6月之前的英语学习（6月之后没学过英语= =）主要是背背四级单词，听听听力。由于四级这个短期目标难度不够，导致内心有侥幸——即使不怎么努力也可以过嘛。所以执行得就很差。关于计划和due，尝试过在早中饭的时候背单词，这个适合吃饭时扣手机的状态，更重要的是早中午一般也没什么紧急的事，所以能够执行；也试过听听力，虽然适合饭点但操作麻烦因而不好执行；而那些计划在\"闲的时候\"和\"晚上\"进行的任务，基本完成不了，因为白天时间充裕的时候悠悠闲闲地把时间都浪费掉了，晚上忙得没有时间。原因有二，一是没有截止时间，在背马原的时候根据前几章的耗时判断，订下了一小时一章的计划，结果背得很好。至于不好估计时间的理科科目，我想可以时刻检查大脑是否处于全速运转状态。二是计划列出来了，但没有经常翻看，就少了提醒监督的作用。笔记也是一样，很多东西写下来的时候是花了一番心思的，如果不温习就浪费了。 学习\"无用知识\" 假设大部分学的\"知识\"都用不到，那么学习的意义是什么？一年前我认为是学习读书的方法，接触更高的平台，最近在复习的时候又想到这个问题，我想：如果能够靠一周的突击获得别人认真学一学期的分数，那么认真学的意义何在？我认为突击的学习，只学到了知识本身（包括解题方法考试技巧什么），而把如果这些分散到一学期的学习中，每周只学一小节，但是花了很多功夫思考、质疑、理解，那么知识会掌握得更透彻牢固只是次要的，主要的是获得了比突击学习多得多的潜移默化的提升。就像有人说\"读过的书中的情节、人物都忘掉的时候，留下来的，就是素养\"，同理只掌握知识本身最后不会留下什么，而花了功夫，功不唐捐，这些功夫就会变成素养，留在自己这里。这个有点像之前总结过的\"重要的事与紧急的事\"。以微积分为例，考试是紧急的事，对考试最有帮助的是大致理解定理的内容和做题目；获取\"素养\"是重要的事，对这个有帮助的是常思考，比较阅读多种教材，看看大师们不同的理解，看看这些定理的实际应用。可以看出后者明显是更花时间的。翟学伟老师说：\"数学，培养的是人的逻辑思维。我和一些学数学的人讲话，他们数学学得很好，可是讲话毫无逻辑，那他们学那么多年都学点啥？\" 大学的课程体系非常连续，每一门课都是下一门课的前置，葛欣还有永德都强调过基础的重要性，有些人总是跑得快，有些人努力还跑不动，看似是脑子问题，实则常常是他们之前的付出不同。所有不牢固的基础，都会变成日后前行的摩擦力。一个同学可以不上课，只需要考前一晚翻翻课本就能考好，因为他高中都学过了；另一位同学物理理解的非常透彻学着也没遇到过困难，因为他上学期写掉了4k多道分析的题。想减小\"阻力\"没有别的办法，就是补。 Data/wisdom 还要感谢司老师，曾经在发过一封讲information、data和wisdom的邮件，这个学期一直在实践中思考这个问题。 对于data，一定要动手。很多IT人士有自己的个人博客，倒也不发什么感慨，主要都是一些how to类的 记录，起初不明白为什么要把个人博客搞成这个样子，现在懂了——那就是他们的笔记本。为了了解一个领域，我会上网搜索然后看大量有关的资料，基本看完之后心里就会有个七七八八。现在发现这还不够，看完心里是清楚不少，就跟看公开课看完几节的感觉一样，然而那都是瞬时记忆，瞬时记忆给人酣畅淋漓的快感和我是专家的错觉。一段时间之后，就又回到了初始状态，那么当初花大量精力搜索的资料费的眼力就都浪费了。刷知乎也一样，看着高大上的东西有种自己也高大上的错觉，然而只有系统地整理总结并且更重要的，执行，才能真正提高自己。 对于wisdom，应追求内化。像是\"多思考\"这种，就多多去做，在实践中永久记忆。对于不便于常实践的，则先按照data记下来，常翻看并找机会再慢慢实践。 说到常翻看就引出了笔记和备忘录需要常翻看的问题。自从使用了备忘记事软件，再加上定时功能，很少会忘掉事情了，但是拖延的情况还是很多。具体还是上面说的计划的事儿。 环境 人生，就是要超越环境的局限。之前在\"二本学校就不算学校吗\"的问题里看到，\"想要提升，就要时刻想着那些985的同学都在干什么，用顶尖学校的要求来要求自己。\"往往处于一个大环境下，就会以这个环境的水平来评估自己的水平，也就受到了环境的局限。看到那些最好的公司的target school，才会意识到自己还处于学历鄙视链的底端；想在LinkedIn上添加与他人建立联系，才会发现自己的简历多么贫瘠。同样，在什么环境中，周围都有\"不太行\"的人。然而人的性格却是趋向于从他们身上寻找安慰——他也没起床呢/大家都没时间参加活动/大家都是最后一天才上交作业……这样，就被拖累了。远离他们，并且努力不要成为别人的拖累。其实这也是很基础的道理，其善从之其不善改之什么的。 考前复习的案例 无论什么考试，考试前都能以极高的效率把内容大致复习完，那么即使考虑到学的不细致的因素，也说明了坐下来专心钻一个东西的成效是惊人的，也说明了不是没有时间，实际上每个人都可以做倍于当前成就的事情。另一个引起思考的问题是，平常每天也不是都在浪费时间，只是把时间分到了各种不同的地方，感觉比专于一处低得多，这个需要关注一下。 生活情趣 相比上学期的总结，这篇文章情趣少了些，可能是因为这学期都在考虑未来方向的问题所以对其他的关注就少了一些。\"生活太安逸了,工作就会被生活所累\"——果然是越老就越敬佩迅哥~ 一日在古籍阅览区痛苦地复习，看不动了就起来转转，顺手拎起一本《当今世界形势》，是一本非常老的书了，大致是闭关锁国那个时代出过国的人写的。我假想自己是一个什么都不懂却又对世界充满好奇的小青年，想象着无意间获得这样一本\"神书\"的激动，想象着对一行行文字贪婪阅读的快感……竟从中获得很大乐趣。看着身边斜躺在沙发上盯着线装书看的帅哥，觉得生活中时不时静下来也很幸福。 小爱好 业余时间玩什么，对人的影响也是很大的，目前来说除了上文中所说对\"美\"的追求，暂时没有其他的。那么就发展这一爱好吧，在广泛听音乐看电影的基础上，学习一些有关的知识。 人际关系 人与人之间的帮助都不是无偿的，这学期求人帮忙，基本都在事后\"实打实\"地表达了谢意，感觉很好。上大学以后一直讨厌无聊的人际关系，开始还有些怀疑自己是不是太避世了，后来发现很多厉害的人都是孤独的，也就放心些。然而另一方面，有些关系是很有价值的，有价值的关系需要主动维持，而我在这方面还不太擅长，这一点除了自己学，更应该多请教爸妈。 对别人，不能乱作评价，随便指挥。这学期结识一人，听说也见识到他的一些事情，是我反感的，心里也把他划到了\"远离\"分类；后来因为一些事跟他交谈过几次，感觉确实非常温和善良；再后来又了解到一些东西，发现其实在之前不了解的地方，他其实是个非常棒的我非常欣赏的那种人。就更觉得自己开始的判断太片面、太武断。不应乱指挥则是之前就意识到的，我是个容易忍不住瞎BB，近来在忍不住的时候提醒自己，他人有他人的经历、思想、价值观，跟我可能完全不同的，我既然不是非常了解就没有资格指手画脚，于是也越来越能够控制自己了，很开心。 有一个一直很奇怪的问题，就是同学们似乎都不太能正确对待自己和别人的\"成就\"，或者说不能正常表现。别人比自己好就要使劲夸实际是\"黑\"别人，也特别热衷于黑自己。有点像仇富心理，根据我的观察，我认识的文科的同学这种情况就少一些，所以难道这是反映了理工科院系同学们不能正确处理人际关系吗？ 刘慧老师告诉我，除了问长者之外，也可以多与同龄人交流，因为思考激发更多思考。我有这么多的问题，多找些志同道合的当然好，但是怎么才能有效地寻找他们呢，这个也需要思考。 对比上学期 对比之前的总结来看，这学期是有一些进步的，但是这学期有4个月，相比之下我的改进力度就显得太小了。回顾这篇文章，可以看到自己的问题是有很多的，而似乎只有学期末的这个时候，我才认真思索了这些，这也就是改进少的原因，很久改一次肯定是不如常反思常进步的。也就是说，应该建立一个\"反馈系统\"，现在的想法是：平常有了灵感就先记下来，然后每周定时整理和改进。","tags":"thoughts","title":"14-15 大一下学期总结"},{"url":"https://brillliantz.github.io/MySite/about-me/0.About.html","text":"I have so much passion for the beautiful world!","tags":"About Me","title":"About Me"}]}